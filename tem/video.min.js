!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b:b(jQuery)}(function(r){function q(w){var p=w||window.event,m=s.call(arguments,1),e=0,A=0,C=0,v=0,c=0,a=0;if(w=r.event.fix(p),w.type="mousewheel","detail" in p&&(C=-1*p.detail),"wheelDelta" in p&&(C=p.wheelDelta),"wheelDeltaY" in p&&(C=p.wheelDeltaY),"wheelDeltaX" in p&&(A=-1*p.wheelDeltaX),"axis" in p&&p.axis===p.HORIZONTAL_AXIS&&(A=-1*C,C=0),e=0===C?A:C,"deltaY" in p&&(C=-1*p.deltaY,e=C),"deltaX" in p&&(A=p.deltaX,0===C&&(e=-1*A)),0!==C||0!==A){if(1===p.deltaMode){var z=r.data(this,"mousewheel-line-height"),e=e*z,C=C*z,A=A*z}else{2===p.deltaMode&&(z=r.data(this,"mousewheel-page-height"),e*=z,C*=z,A*=z)}if(v=Math.max(Math.abs(C),Math.abs(A)),(!f||f>v)&&(f=v,h.settings.adjustOldDeltas&&("mousewheel"===p.type&&0===v%120)&&(f/=40)),h.settings.adjustOldDeltas&&("mousewheel"===p.type&&0===v%120)&&(e/=40,A/=40,C/=40),e=Math[1<=e?"floor":"ceil"](e/f),A=Math[1<=A?"floor":"ceil"](A/f),C=Math[1<=C?"floor":"ceil"](C/f),h.settings.normalizeOffset&&this.getBoundingClientRect){p=this.getBoundingClientRect(),c=w.clientX-p.left,a=w.clientY-p.top}return w.deltaX=A,w.deltaY=C,w.deltaFactor=f,w.offsetX=c,w.offsetY=a,w.deltaMode=0,m.unshift(w,e,A,C),j&&clearTimeout(j),j=setTimeout(o,200),(r.event.dispatch||r.event.handle).apply(this,m)}}function o(){f=null}var j,f,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel" in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice;if(r.event.fixHooks){for(var g=i.length;g;){r.event.fixHooks[i[--g]]=r.event.mouseHooks}}var h=r.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var a=l.length;a;){this.addEventListener(l[--a],q,!1)}}else{this.onmousewheel=q}r.data(this,"mousewheel-line-height",h.getLineHeight(this));r.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=l.length;a;){this.removeEventListener(l[--a],q,!1)}}else{this.onmousewheel=null}r.removeData(this,"mousewheel-line-height");r.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){a=r(a);var d=a["offsetParent" in r.fn?"offsetParent":"parent"]();return d.length||(d=r("body")),parseInt(d.css("fontSize"),10)||parseInt(a.css("fontSize"),10)||16},getPageHeight:function(a){return r(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};r.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?module.exports=b:b(jQuery)}(function(r){function q(w){var p=w||window.event,e=s.call(arguments,1),m=0,A=0,C=0,v=0,c=0,a=0;if(w=r.event.fix(p),w.type="mousewheel","detail" in p&&(C=-1*p.detail),"wheelDelta" in p&&(C=p.wheelDelta),"wheelDeltaY" in p&&(C=p.wheelDeltaY),"wheelDeltaX" in p&&(A=-1*p.wheelDeltaX),"axis" in p&&p.axis===p.HORIZONTAL_AXIS&&(A=-1*C,C=0),m=0===C?A:C,"deltaY" in p&&(C=-1*p.deltaY,m=C),"deltaX" in p&&(A=p.deltaX,0===C&&(m=-1*A)),0!==C||0!==A){if(1===p.deltaMode){var z=r.data(this,"mousewheel-line-height"),m=m*z,C=C*z,A=A*z}else{2===p.deltaMode&&(z=r.data(this,"mousewheel-page-height"),m*=z,C*=z,A*=z)}if(v=Math.max(Math.abs(C),Math.abs(A)),(!f||f>v)&&(f=v,h.settings.adjustOldDeltas&&("mousewheel"===p.type&&0===v%120)&&(f/=40)),h.settings.adjustOldDeltas&&("mousewheel"===p.type&&0===v%120)&&(m/=40,A/=40,C/=40),m=Math[1<=m?"floor":"ceil"](m/f),A=Math[1<=A?"floor":"ceil"](A/f),C=Math[1<=C?"floor":"ceil"](C/f),h.settings.normalizeOffset&&this.getBoundingClientRect){p=this.getBoundingClientRect(),c=w.clientX-p.left,a=w.clientY-p.top}return w.deltaX=A,w.deltaY=C,w.deltaFactor=f,w.offsetX=c,w.offsetY=a,w.deltaMode=0,e.unshift(w,m,A,C),j&&clearTimeout(j),j=setTimeout(o,200),(r.event.dispatch||r.event.handle).apply(this,e)}}function o(){f=null}var j,f,i=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l="onwheel" in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice;if(r.event.fixHooks){for(var g=i.length;g;){r.event.fixHooks[i[--g]]=r.event.mouseHooks}}var h=r.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener){for(var a=l.length;a;){this.addEventListener(l[--a],q,!1)}}else{this.onmousewheel=q}r.data(this,"mousewheel-line-height",h.getLineHeight(this));r.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var a=l.length;a;){this.removeEventListener(l[--a],q,!1)}}else{this.onmousewheel=null}r.removeData(this,"mousewheel-line-height");r.removeData(this,"mousewheel-page-height")},getLineHeight:function(a){a=r(a);var d=a["offsetParent" in r.fn?"offsetParent":"parent"]();return d.length||(d=r("body")),parseInt(d.css("fontSize"),10)||parseInt(a.css("fontSize"),10)||16},getPageHeight:function(a){return r(a).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};r.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"undefined"!=typeof module&&module.exports?module.exports=b:b(jQuery,window,document)}(function(b){!function(a){var f="undefined"!=typeof module&&module.exports,d="https:"==document.location.protocol?"https:":"http:";"function"==typeof define&&define.amd||(f?require("jquery-mousewheel")(b):b.event.special.mousewheel||b("head").append(decodeURI("%3Cscript src="+d+"//cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.13/jquery.mousewheel.min.js%3E%3C/script%3E")));a()}(function(){var au,at="mCS",aq={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,documentTouchScroll:!0,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:"auto",autoUpdateTimeout:60},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},am=0,ap={},ar=window.attachEvent&&!window.addEventListener?1:0,ai=!1,an="mCSB_dragger_onDrag mCSB_scrollTools_onDrag mCS_img_loaded mCS_disabled mCS_destroyed mCS_no_scrollbar mCS-autoHide mCS-dir-rtl mCS_no_scrollbar_y mCS_no_scrollbar_x mCS_y_hidden mCS_x_hidden mCSB_draggerContainer mCSB_buttonUp mCSB_buttonDown mCSB_buttonLeft mCSB_buttonRight".split(" "),ao={init:function(e){e=b.extend(!0,{},aq,e);var c=J.call(this);if(e.live){var k=e.liveSelector||this.selector||".mCustomScrollbar",d=b(k);if("off"===e.live){return void v(k)}ap[k]=setTimeout(function(){d.mCustomScrollbar(e);"once"===e.live&&d.length&&v(k)},500)}else{v(k)}return e.setWidth=e.set_width?e.set_width:e.setWidth,e.setHeight=e.set_height?e.set_height:e.setHeight,e.axis=e.horizontalScroll?"x":"yx"===e.axis||"xy"===e.axis||"auto"===e.axis?"yx":"x"===e.axis||"horizontal"===e.axis?"x":"y",e.scrollInertia=0<e.scrollInertia&&17>e.scrollInertia?17:e.scrollInertia,"object"!=typeof e.mouseWheel&&1==e.mouseWheel&&(e.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),e.mouseWheel.scrollAmount=e.mouseWheelPixels?e.mouseWheelPixels:e.mouseWheel.scrollAmount,e.mouseWheel.normalizeDelta=e.advanced.normalizeMouseWheelDelta?e.advanced.normalizeMouseWheelDelta:e.mouseWheel.normalizeDelta,e.scrollButtons.scrollType="stepped"===e.scrollButtons.scrollType||"pixels"===e.scrollButtons.scrollType||"step"===e.scrollButtons.scrollType||"click"===e.scrollButtons.scrollType?"stepped":"stepless",r(e),b(c).each(function(){var A=b(this);if(!A.data(at)){A.data(at,{idx:++am,opt:e,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:A.css("direction"),cbOffsets:null,trigger:null,poll:{size:{o:0,n:0},img:{o:0,n:0},change:{o:0,n:0}}});var u=A.data(at),t=u.opt,C=A.data("mcs-axis"),y=A.data("mcs-scrollbar-position"),m=A.data("mcs-theme");C&&(t.axis=C);y&&(t.scrollbarPosition=y);m&&(t.theme=m,r(t));var y=b(this),C=y.data(at),m=C.opt,B=m.autoExpandScrollbar?" "+an[1]+"_expand":"",B=["<div id='mCSB_"+C.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+C.idx+"_scrollbar mCS-"+m.theme+" mCSB_scrollTools_vertical"+B+"'><div class='"+an[12]+"'><div id='mCSB_"+C.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+C.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+C.idx+"_scrollbar mCS-"+m.theme+" mCSB_scrollTools_horizontal"+B+"'><div class='"+an[12]+"'><div id='mCSB_"+C.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],p="yx"===m.axis?"mCSB_vertical_horizontal":"x"===m.axis?"mCSB_horizontal":"mCSB_vertical",B="yx"===m.axis?B[0]+B[1]:"x"===m.axis?B[1]:B[0],x="yx"===m.axis?"<div id='mCSB_"+C.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",n=m.autoHideScrollbar?" "+an[6]:"",w="x"!==m.axis&&"rtl"===C.langDir?" "+an[7]:"";m.setWidth&&y.css("width",m.setWidth);m.setHeight&&y.css("height",m.setHeight);m.setLeft="y"!==m.axis&&"rtl"===C.langDir?"989999px":m.setLeft;y.addClass("mCustomScrollbar _"+at+"_"+C.idx+n+w).wrapInner("<div id='mCSB_"+C.idx+"' class='mCustomScrollBox mCS-"+m.theme+" "+p+"'><div id='mCSB_"+C.idx+"_container' class='mCSB_container' style='position:relative; top:"+m.setTop+"; left:"+m.setLeft+";' dir='"+C.langDir+"' /></div>");p=b("#mCSB_"+C.idx);n=b("#mCSB_"+C.idx+"_container");"y"===m.axis||m.advanced.autoExpandHorizontalScroll||n.css("width",o(n));"outside"===m.scrollbarPosition?("static"===y.css("position")&&y.css("position","relative"),y.css("overflow","visible"),p.addClass("mCSB_outside").after(B)):(p.addClass("mCSB_inside").append(B),n.wrap(x));m=b(this).data(at);y=m.opt;m=b(".mCSB_"+m.idx+"_scrollbar:first");B=h(y.scrollButtons.tabindex)?"tabindex='"+y.scrollButtons.tabindex+"'":"";B=["<a href='#' class='"+an[13]+"' "+B+" />","<a href='#' class='"+an[14]+"' "+B+" />","<a href='#' class='"+an[15]+"' "+B+" />","<a href='#' class='"+an[16]+"' "+B+" />"];B=["x"===y.axis?B[2]:B[0],"x"===y.axis?B[3]:B[1],B[2],B[3]];y.scrollButtons.enable&&m.prepend(B[0]).append(B[1]).next(".mCSB_scrollTools").prepend(B[2]).append(B[3]);C=[b("#mCSB_"+C.idx+"_dragger_vertical"),b("#mCSB_"+C.idx+"_dragger_horizontal")];C[0].css("min-height",C[0].height());C[1].css("min-width",C[1].width());u&&t.callbacks.onCreate&&"function"==typeof t.callbacks.onCreate&&t.callbacks.onCreate.call(this);b("#mCSB_"+u.idx+"_container img:not(."+an[2]+")").addClass(an[2]);ao.update.call(null,A)}})},update:function(d,c){var e=d||J.call(this);return b(e).each(function(){var y=b(this);if(y.data(at)){var A=y.data(at),x=A.opt,p=b("#mCSB_"+A.idx+"_container"),u=b("#mCSB_"+A.idx),w=[b("#mCSB_"+A.idx+"_dragger_vertical"),b("#mCSB_"+A.idx+"_dragger_horizontal")];if(p.length){A.tweenRunning&&F(y);c&&A&&x.callbacks.onBeforeUpdate&&"function"==typeof x.callbacks.onBeforeUpdate&&x.callbacks.onBeforeUpdate.call(this);y.hasClass(an[3])&&y.removeClass(an[3]);y.hasClass(an[4])&&y.removeClass(an[4]);u.css("max-height","none");u.height()!==y.height()&&u.css("max-height",y.height());var n=b(this).data(at),u=n.opt,n=b("#mCSB_"+n.idx+"_container");if(u.advanced.autoExpandHorizontalScroll&&"y"!==u.axis){n.css({width:"auto","min-width":0,"overflow-x":"scroll"});var C=Math.ceil(n[0].scrollWidth);3===u.advanced.autoExpandHorizontalScroll||2!==u.advanced.autoExpandHorizontalScroll&&C>n.parent().width()?n.css({width:C,"min-width":"100%","overflow-x":"inherit"}):n.css({"overflow-x":"inherit",position:"absolute"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(n[0].getBoundingClientRect().right+0.4)-Math.floor(n[0].getBoundingClientRect().left),"min-width":"100%",position:"relative"}).unwrap()}"y"===x.axis||x.advanced.autoExpandHorizontalScroll||p.css("width",o(p));var C=b(this).data(at),n=b("#mCSB_"+C.idx),B=b("#mCSB_"+C.idx+"_container"),u=null==C.overflowed?B.height():B.outerHeight(!1),C=null==C.overflowed?B.width():B.outerWidth(!1),t=B[0].scrollHeight,B=B[0].scrollWidth,n=(t>u&&(u=t),B>C&&(C=B),[u>n.height(),C>n.width()]);A.overflowed=n;H.call(this);x.autoDraggerLength&&(u=b(this).data(at),n=b("#mCSB_"+u.idx),C=b("#mCSB_"+u.idx+"_container"),u=[b("#mCSB_"+u.idx+"_dragger_vertical"),b("#mCSB_"+u.idx+"_dragger_horizontal")],n=[n.height()/C.outerHeight(!1),n.width()/C.outerWidth(!1)],n=[parseInt(u[0].css("min-height")),Math.round(n[0]*u[0].parent().height()),parseInt(u[1].css("min-width")),Math.round(n[1]*u[1].parent().width())],C=ar&&n[3]<n[2]?n[2]:n[3],u[0].css({height:ar&&n[1]<n[0]?n[0]:n[1],"max-height":u[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":n[0]+"px"}),u[1].css({width:C,"max-width":u[1].parent().width()-10}));u=b(this).data(at);C=b("#mCSB_"+u.idx);B=b("#mCSB_"+u.idx+"_container");n=[b("#mCSB_"+u.idx+"_dragger_vertical"),b("#mCSB_"+u.idx+"_dragger_horizontal")];C=[B.outerHeight(!1)-C.height(),B.outerWidth(!1)-C.width()];n=[C[0]/(n[0].parent().height()-n[0].height()),C[1]/(n[1].parent().width()-n[1].width())];u.scrollRatio={y:n[0],x:n[1]};af.call(this);p=[Math.abs(p[0].offsetTop),Math.abs(p[0].offsetLeft)];"x"!==x.axis&&(A.overflowed[0]?w[0].height()>w[0].parent().height()?al.call(this):(G(y,p[0].toString(),{dir:"y",dur:0,overwrite:"none"}),A.contentReset.y=null):(al.call(this),"y"===x.axis?N.call(this):"yx"===x.axis&&A.overflowed[1]&&G(y,p[1].toString(),{dir:"x",dur:0,overwrite:"none"})));"y"!==x.axis&&(A.overflowed[1]?w[1].width()>w[1].parent().width()?al.call(this):(G(y,p[1].toString(),{dir:"x",dur:0,overwrite:"none"}),A.contentReset.x=null):(al.call(this),"x"===x.axis?N.call(this):"yx"===x.axis&&A.overflowed[0]&&G(y,p[0].toString(),{dir:"y",dur:0,overwrite:"none"})));c&&A&&(2===c&&x.callbacks.onImageLoad&&"function"==typeof x.callbacks.onImageLoad?x.callbacks.onImageLoad.call(this):3===c&&x.callbacks.onSelectorChange&&"function"==typeof x.callbacks.onSelectorChange?x.callbacks.onSelectorChange.call(this):x.callbacks.onUpdate&&"function"==typeof x.callbacks.onUpdate&&x.callbacks.onUpdate.call(this));Q.call(this)}}})},scrollTo:function(d,c){if("undefined"!=typeof d&&null!=d){var e=J.call(this);return b(e).each(function(){var p=b(this);if(p.data(at)){var u=p.data(at),m=u.opt,n=b.extend(!0,{},{trigger:"external",scrollInertia:m.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},c),k=av.call(this,d),t=0<n.scrollInertia&&17>n.scrollInertia?17:n.scrollInertia;k[0]=a.call(this,k[0],"y");k[1]=a.call(this,k[1],"x");n.moveDragger&&(k[0]*=u.scrollRatio.y,k[1]*=u.scrollRatio.x);n.dur=ae()?0:t;setTimeout(function(){null!==k[0]&&"undefined"!=typeof k[0]&&"x"!==m.axis&&u.overflowed[0]&&(n.dir="y",n.overwrite="all",G(p,k[0].toString(),n));null!==k[1]&&"undefined"!=typeof k[1]&&"y"!==m.axis&&u.overflowed[1]&&(n.dir="x",n.overwrite="none",G(p,k[1].toString(),n))},n.timeout)}})}},stop:function(){var c=J.call(this);return b(c).each(function(){var d=b(this);d.data(at)&&F(d)})},disable:function(d){var c=J.call(this);return b(c).each(function(){var e=b(this);e.data(at)&&(e.data(at),Q.call(this,"remove"),N.call(this),d&&al.call(this),H.call(this,!0),e.addClass(an[3]))})},destroy:function(){var c=J.call(this);return b(c).each(function(){var e=b(this);if(e.data(at)){var p=e.data(at),m=p.opt,t=b("#mCSB_"+p.idx),k=b("#mCSB_"+p.idx+"_container"),n=b(".mCSB_"+p.idx+"_scrollbar");m.live&&v(m.liveSelector||b(c).selector);Q.call(this,"remove");N.call(this);al.call(this);e.removeData(at);z(this,"mcs");n.remove();k.find("img."+an[2]).removeClass(an[2]);t.replaceWith(k.contents());e.removeClass("mCustomScrollbar _"+at+"_"+p.idx+" "+an[6]+" "+an[7]+" "+an[5]+" "+an[3]).addClass(an[4])}})}},J=function(){return"object"!=typeof b(this)||1>b(this).length?".mCustomScrollbar":this},r=function(c){c.autoDraggerLength=-1<b.inArray(c.theme,["rounded","rounded-dark","rounded-dots","rounded-dots-dark"])?!1:c.autoDraggerLength;c.autoExpandScrollbar=-1<b.inArray(c.theme,"rounded-dots rounded-dots-dark 3d 3d-dark 3d-thick 3d-thick-dark inset inset-dark inset-2 inset-2-dark inset-3 inset-3-dark".split(" "))?!1:c.autoExpandScrollbar;c.scrollButtons.enable=-1<b.inArray(c.theme,["minimal","minimal-dark"])?!1:c.scrollButtons.enable;c.autoHideScrollbar=-1<b.inArray(c.theme,["minimal","minimal-dark"])?!0:c.autoHideScrollbar;c.scrollbarPosition=-1<b.inArray(c.theme,["minimal","minimal-dark"])?"outside":c.scrollbarPosition},v=function(c){ap[c]&&(clearTimeout(ap[c]),z(ap,c))},o=function(d){var c=[d[0].scrollWidth,Math.max.apply(Math,d.children().map(function(){return b(this).outerWidth(!0)}).get())];d=d.parent().width();return c[0]>d?c[0]:c[1]>d?c[1]:"100%"},ak=function(e,d,k){k=k?an[0]+"_expanded":"";var m=e.closest(".mCSB_scrollTools");"active"===d?(e.toggleClass(an[0]+" "+k),m.toggleClass(an[1]),e[0]._draggable=e[0]._draggable?0:1):e[0]._draggable||("hide"===d?(e.removeClass(an[0]),m.removeClass(an[1])):(e.addClass(an[0]),m.addClass(an[1])))},al=function(){var m=b(this),c=m.data(at),n=c.opt,k=b("#mCSB_"+c.idx),p=b("#mCSB_"+c.idx+"_container"),e=[b("#mCSB_"+c.idx+"_dragger_vertical"),b("#mCSB_"+c.idx+"_dragger_horizontal")];if(F(m),("x"!==n.axis&&!c.overflowed[0]||"y"===n.axis&&c.overflowed[0])&&(e[0].add(p).css("top",0),G(m,"_resetY")),"y"!==n.axis&&!c.overflowed[1]||"x"===n.axis&&c.overflowed[1]){n=dx=0,"rtl"===c.langDir&&(n=k.width()-p.outerWidth(!1),dx=Math.abs(n/c.scrollRatio.x)),p.css("left",n),e[1].css("left",dx),G(m,"_resetX")}},af=function(){function c(){n=setTimeout(function(){b.event.special.mousewheel?(clearTimeout(n),Z.call(p[0])):c()},100)}var p=b(this),m=p.data(at),k=m.opt;if(!m.bindEvents){if(s.call(this),k.contentTouchScroll&&l.call(this),g.call(this),k.mouseWheel.enable){var n;c()}ag.call(this);aa.call(this);k.advanced.autoScrollOnFocus&&j.call(this);k.scrollButtons.enable&&aj.call(this);k.keyboard.enable&&ab.call(this);m.bindEvents=!0}},N=function(){var c=b(this),t=c.data(at),n=t.opt,m=at+"_"+t.idx,p=".mCSB_"+t.idx+"_scrollbar",p=b("#mCSB_"+t.idx+",#mCSB_"+t.idx+"_container,#mCSB_"+t.idx+"_container_wrapper,"+p+" ."+an[12]+",#mCSB_"+t.idx+"_dragger_vertical,#mCSB_"+t.idx+"_dragger_horizontal,"+p+">a"),k=b("#mCSB_"+t.idx+"_container");n.advanced.releaseDraggableSelectors&&p.add(b(n.advanced.releaseDraggableSelectors));n.advanced.extraDraggableSelectors&&p.add(b(n.advanced.extraDraggableSelectors));t.bindEvents&&(b(document).add(b(!q()||top.document)).unbind("."+m),p.each(function(){b(this).unbind("."+m)}),clearTimeout(c[0]._focusTimeout),z(c[0],"_focusTimeout"),clearTimeout(t.sequential.step),z(t.sequential,"step"),clearTimeout(k[0].onCompleteTimeout),z(k[0],"onCompleteTimeout"),t.bindEvents=!1)},H=function(c){var u=b(this),p=u.data(at),m=p.opt,t=b("#mCSB_"+p.idx+"_container_wrapper"),t=t.length?t:b("#mCSB_"+p.idx+"_container"),k=[b("#mCSB_"+p.idx+"_scrollbar_vertical"),b("#mCSB_"+p.idx+"_scrollbar_horizontal")],n=[k[0].find(".mCSB_dragger"),k[1].find(".mCSB_dragger")];"x"!==m.axis&&(p.overflowed[0]&&!c?(k[0].add(n[0]).add(k[0].children("a")).css("display","block"),t.removeClass(an[8]+" "+an[10])):(m.alwaysShowScrollbar?(2!==m.alwaysShowScrollbar&&n[0].css("display","none"),t.removeClass(an[10])):(k[0].css("display","none"),t.addClass(an[10])),t.addClass(an[8])));"y"!==m.axis&&(p.overflowed[1]&&!c?(k[1].add(n[1]).add(k[1].children("a")).css("display","block"),t.removeClass(an[9]+" "+an[11])):(m.alwaysShowScrollbar?(2!==m.alwaysShowScrollbar&&n[1].css("display","none"),t.removeClass(an[11])):(k[1].css("display","none"),t.addClass(an[11])),t.addClass(an[9])));p.overflowed[0]||p.overflowed[1]?u.removeClass(an[5]):u.addClass(an[5])},ah=function(e){var n=e.type,k=e.target.ownerDocument!==document&&null!==frameElement?[b(frameElement).offset().top,b(frameElement).offset().left]:null,m=q()&&e.target.ownerDocument!==top.document&&null!==frameElement?[b(e.view.frameElement).offset().top,b(e.view.frameElement).offset().left]:[0,0];switch(n){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return k?[e.originalEvent.pageY-k[0]+m[0],e.originalEvent.pageX-k[1]+m[1],!1]:[e.originalEvent.pageY,e.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":return n=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],k=e.originalEvent.touches.length||e.originalEvent.changedTouches.length,e.target.ownerDocument!==document?[n.screenY,n.screenX,1<k]:[n.pageY,n.pageX,1<k];default:return k?[e.pageY-k[0]+m[0],e.pageX-k[1]+m[1],!1]:[e.pageY,e.pageX,!1]}},s=function(){function D(e,k,p,m){if(c[0].idleTimer=233>d.scrollInertia?250:0,C.attr("id")===w[1]){var n="x";e=(C[0].offsetLeft-k+m)*A.scrollRatio.x}else{n="y",e=(C[0].offsetTop-e+p)*A.scrollRatio.y}G(y,e.toString(),{dir:n,drag:!0})}var C,B,I,y=b(this),A=y.data(at),d=A.opt,x=at+"_"+A.idx,w=["mCSB_"+A.idx+"_dragger_vertical","mCSB_"+A.idx+"_dragger_horizontal"],c=b("#mCSB_"+A.idx+"_container"),E=b("#"+w[0]+",#"+w[1]),u=d.advanced.releaseDraggableSelectors?E.add(b(d.advanced.releaseDraggableSelectors)):E,t=d.advanced.extraDraggableSelectors?b(!q()||top.document).add(b(d.advanced.extraDraggableSelectors)):b(!q()||top.document);E.bind("contextmenu."+x,function(e){e.preventDefault()}).bind("mousedown."+x+" touchstart."+x+" pointerdown."+x+" MSPointerDown."+x,function(e){if(e.stopImmediatePropagation(),e.preventDefault(),!e.which||1===e.which){ai=!0;ar&&(document.onselectstart=function(){return !1});ad.call(c,!1);F(y);C=b(this);var m=C.offset(),n=ah(e)[0]-m.top;e=ah(e)[1]-m.left;var k=C.height()+m.top,m=C.width()+m.left;k>n&&0<n&&m>e&&0<e&&(B=n,I=e);ak(C,"active",d.autoExpandScrollbar)}}).bind("touchmove."+x,function(e){e.stopImmediatePropagation();e.preventDefault();var m=C.offset(),k=ah(e)[0]-m.top;e=ah(e)[1]-m.left;D(B,I,k,e)});b(document).add(t).bind("mousemove."+x+" pointermove."+x+" MSPointerMove."+x,function(e){if(C){var m=C.offset(),k=ah(e)[0]-m.top;e=ah(e)[1]-m.left;B===k&&I===e||D(B,I,k,e)}}).add(u).bind("mouseup."+x+" touchend."+x+" pointerup."+x+" MSPointerUp."+x,function(){C&&(ak(C,"active",d.autoExpandScrollbar),C=null);ai=!1;ar&&(document.onselectstart=null);ad.call(c,!0)})},l=function(){function aS(d){if(!f(d)||ai||ah(d)[2]){return void (au=0)}au=1;aw=aH=0;aK=1;aF.removeClass("mCS_touch_action");var e=ax.offset();aP=ah(d)[0]-e.top;aQ=ah(d)[1]-e.left;S=[ah(d)[0],ah(d)[1]]}function aV(e){if(f(e)&&!ai&&!ah(e)[2]&&(ay.documentTouchScroll||e.preventDefault(),e.stopImmediatePropagation(),(!aw||aH)&&aK)){aN=i();var d=c.offset(),k=ah(e)[0]-d.top,d=ah(e)[1]-d.left;if(aJ.push(k),X.push(d),S[2]=Math.abs(ah(e)[0]-S[0]),S[3]=Math.abs(ah(e)[1]-S[1]),az.overflowed[0]){var n=aL[0].parent().height()-aL[0].height(),n=0<aP-k&&k-aP>-(n*az.scrollRatio.y)&&(2*S[3]<S[2]||"yx"===ay.axis)}if(az.overflowed[1]){var m=aL[1].parent().width()-aL[1].width(),m=0<aQ-d&&d-aQ>-(m*az.scrollRatio.x)&&(2*S[2]<S[3]||"yx"===ay.axis)}n||m?(x||e.preventDefault(),aH=1):(aw=1,aF.addClass("mCS_touch_action"));x&&e.preventDefault();aC="yx"===ay.axis?[aP-k,aQ-d]:"x"===ay.axis?[null,aQ-d]:[aP-k,null];ax[0].idleTimer=250;az.overflowed[0]&&aR(aC[0],E,"mcsLinearOut","y","all",!0);az.overflowed[1]&&aR(aC[1],E,"mcsLinearOut","x",w,!0)}}function aT(d){if(!f(d)||ai||ah(d)[2]){return void (au=0)}au=1;d.stopImmediatePropagation();F(aF);aO=i();var e=c.offset();aI=ah(d)[0]-e.top;aB=ah(d)[1]-e.left;aJ=[];X=[]}function aG(e){if(f(e)&&!ai&&!ah(e)[2]){aK=0;e.stopImmediatePropagation();aw=aH=0;aM=i();var d=c.offset(),k=ah(e)[0]-d.top,d=ah(e)[1]-d.left;if(!(30<aM-aN)){aD=1000/(aM-aO);var m=(e=2.5>aD)?[aJ[aJ.length-2],X[X.length-2]]:[0,0];aE=e?[k-m[0],d-m[1]]:[k-aI,d-aB];k=[Math.abs(aE[0]),Math.abs(aE[1])];aD=e?[Math.abs(aE[0]/4),Math.abs(aE[1]/4)]:[aD,aD];e=[Math.abs(ax[0].offsetTop)-aE[0]*aU(k[0]/aD[0],aD[0]),Math.abs(ax[0].offsetLeft)-aE[1]*aU(k[1]/aD[1],aD[1])];aC="yx"===ay.axis?[e[0],e[1]]:"x"===ay.axis?[null,e[1]]:[e[0],null];aA=[4*k[0]+ay.scrollInertia,4*k[1]+ay.scrollInertia];e=parseInt(ay.contentTouchScroll)||0;aC[0]=k[0]>e?aC[0]:0;aC[1]=k[1]>e?aC[1]:0;az.overflowed[0]&&aR(aC[0],aA[0],"mcsEaseOut","y",w,!1);az.overflowed[1]&&aR(aC[1],aA[1],"mcsEaseOut","x",w,!1)}}}function aU(e,d){var k=[1.5*d,2*d,d/1.5,d/2];return 90<e?4<d?k[0]:k[3]:60<e?3<d?k[3]:k[2]:30<e?8<d?k[1]:6<d?k[0]:4<d?d:k[2]:8<d?d:k[3]}function aR(k,e,m,t,n,p){k&&G(aF,k.toString(),{dur:e,scrollEasing:m,dir:t,overwrite:n,drag:p})}var aK,aP,aQ,aI,aB,aO,aN,aM,aE,aD,aC,aA,aH,aw,aF=b(this),az=aF.data(at),ay=az.opt,I=at+"_"+az.idx,c=b("#mCSB_"+az.idx),ax=b("#mCSB_"+az.idx+"_container"),aL=[b("#mCSB_"+az.idx+"_dragger_vertical"),b("#mCSB_"+az.idx+"_dragger_horizontal")],aJ=[],X=[],E=0,w="yx"===ay.axis?"none":"all",S=[],Y=ax.find("iframe"),W=["touchstart."+I+" pointerdown."+I+" MSPointerDown."+I,"touchmove."+I+" pointermove."+I+" MSPointerMove."+I,"touchend."+I+" pointerup."+I+" MSPointerUp."+I],x=void 0!==document.body.style.touchAction&&""!==document.body.style.touchAction;ax.bind(W[0],function(d){aS(d)}).bind(W[1],function(d){aV(d)});c.bind(W[0],function(d){aT(d)}).bind(W[2],function(d){aG(d)});Y.length&&Y.each(function(){b(this).bind("load",function(){q(this)&&b(this.contentDocument||this.contentWindow.document).bind(W[0],function(d){aS(d);aT(d)}).bind(W[1],function(d){aV(d)}).bind(W[2],function(d){aG(d)})})})},g=function(){function t(e,d,k){p.type=k&&x?"stepped":"stepless";p.scrollAmount=10;ac(u,e,d,"mcsLinearOut",k?60:null)}var x,u=b(this),y=u.data(at),w=y.opt,p=y.sequential,c=at+"_"+y.idx,m=b("#mCSB_"+y.idx+"_container"),n=m.parent();m.bind("mousedown."+c,function(){au||x||(x=1,ai=!0)}).add(document).bind("mousemove."+c,function(d){if(!au&&x&&(window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type&&document.selection.createRange().text)){var k=m.offset(),e=ah(d)[0]-k.top+m[0].offsetTop;d=ah(d)[1]-k.left+m[0].offsetLeft;0<e&&e<n.height()&&0<d&&d<n.width()?p.step&&t("off",null,"stepped"):("x"!==w.axis&&y.overflowed[0]&&(0>e?t("on",38):e>n.height()&&t("on",40)),"y"!==w.axis&&y.overflowed[1]&&(0>d?t("on",37):d>n.width()&&t("on",39)))}}).bind("mouseup."+c+" dragend."+c,function(){au||(x&&(x=0,t("off",null)),ai=!1)})},Z=function(){function c(E,e){F(w);var B=w,C=E.target,A=C.nodeName.toLowerCase(),B=B.data(at).opt.mouseWheel.disableOver,y=["select","textarea"];if(!(-1<b.inArray(A,B))||-1<b.inArray(A,y)&&!b(C).is(":focus")){B="auto"!==p.mouseWheel.deltaFactor?parseInt(p.mouseWheel.deltaFactor):ar&&100>E.deltaFactor?100:E.deltaFactor||100;C=p.scrollInertia;if("x"===p.axis||"x"===p.mouseWheel.axis){var A="x",B=[Math.round(B*u.scrollRatio.x),parseInt(p.mouseWheel.scrollAmount)],B="auto"!==p.mouseWheel.scrollAmount?B[1]:B[0]>=n.width()?0.9*n.width():B[0],y=Math.abs(b("#mCSB_"+u.idx+"_container")[0].offsetLeft),x=t[1][0].offsetLeft,I=t[1].parent().width()-t[1].width(),D="y"===p.mouseWheel.axis?E.deltaY||e:E.deltaX}else{A="y",B=[Math.round(B*u.scrollRatio.y),parseInt(p.mouseWheel.scrollAmount)],B="auto"!==p.mouseWheel.scrollAmount?B[1]:B[0]>=n.height()?0.9*n.height():B[0],y=Math.abs(b("#mCSB_"+u.idx+"_container")[0].offsetTop),x=t[0][0].offsetTop,I=t[0].parent().height()-t[0].height(),D=E.deltaY||e}"y"===A&&!u.overflowed[0]||"x"===A&&!u.overflowed[1]||((p.mouseWheel.invert||E.webkitDirectionInvertedFromDevice)&&(D=-D),p.mouseWheel.normalizeDelta&&(D=0>D?-1:1),(0<D&&0!==x||0>D&&x!==I||p.mouseWheel.preventDefault)&&(E.stopImmediatePropagation(),E.preventDefault()),5>E.deltaFactor&&!p.mouseWheel.normalizeDelta&&(B=E.deltaFactor,C=17),G(w,(y-D*B).toString(),{dir:A,dur:C}))}}if(b(this).data(at)){var w=b(this),u=w.data(at),p=u.opt,m=at+"_"+u.idx,n=b("#mCSB_"+u.idx),t=[b("#mCSB_"+u.idx+"_dragger_vertical"),b("#mCSB_"+u.idx+"_dragger_horizontal")],d=b("#mCSB_"+u.idx+"_container").find("iframe");d.length&&d.each(function(){b(this).bind("load",function(){q(this)&&b(this.contentDocument||this.contentWindow.document).bind("mousewheel."+m,function(e,k){c(e,k)})})});n.bind("mousewheel."+m,function(e,k){c(e,k)})}},R={},q=function(k){var u=!1,n=!1,u=null;if(void 0===k?n="#empty":void 0!==b(k).attr("id")&&(n=b(k).attr("id")),!1!==n&&void 0!==R[n]){return R[n]}if(k){try{var t=k.contentDocument||k.contentWindow.document,u=t.body.innerHTML}catch(p){}}else{try{t=top.document,u=t.body.innerHTML}catch(m){}}u=null!==u;return !1!==n&&(R[n]=u),u},ad=function(d){var c=this.find("iframe");c.length&&c.css("pointer-events",d?"auto":"none")},ag=function(){var c,u=b(this),p=u.data(at),t=at+"_"+p.idx,m=b("#mCSB_"+p.idx+"_container"),n=m.parent();b(".mCSB_"+p.idx+"_scrollbar ."+an[12]).bind("mousedown."+t+" touchstart."+t+" pointerdown."+t+" MSPointerDown."+t,function(d){ai=!0;b(d.target).hasClass("mCSB_dragger")||(c=1)}).bind("touchend."+t+" pointerup."+t+" MSPointerUp."+t,function(){ai=!1}).bind("click."+t,function(w){if(c&&(c=0,b(w.target).hasClass(an[12])||b(w.target).hasClass("mCSB_draggerRail"))){F(u);var k=b(this),d=k.find(".mCSB_dragger");if(0<k.parent(".mCSB_scrollTools_horizontal").length){if(!p.overflowed[1]){return}k="x";w=w.pageX>d.offset().left?-1:1;w=Math.abs(m[0].offsetLeft)-w*0.9*n.width()}else{if(!p.overflowed[0]){return}k="y";w=w.pageY>d.offset().top?-1:1;w=Math.abs(m[0].offsetTop)-w*0.9*n.height()}G(u,w.toString(),{dir:k,scrollEasing:"mcsEaseInOut"})}})},j=function(){var c=b(this),u=c.data(at),p=u.opt,t=at+"_"+u.idx,m=b("#mCSB_"+u.idx+"_container"),n=m.parent();m.bind("focusin."+t,function(){var k=b(document.activeElement),e=m.find(".mCustomScrollBox").length;k.is(p.advanced.autoScrollOnFocus)&&(F(c),clearTimeout(c[0]._focusTimeout),c[0]._focusTimer=e?17*e:0,c[0]._focusTimeout=setTimeout(function(){var w=[O(k)[0],O(k)[1]],y=[m[0].offsetTop,m[0].offsetLeft],y=[0<=y[0]+w[0]&&y[0]+w[0]<n.height()-k.outerHeight(!1),0<=y[1]+w[1]&&y[0]+w[1]<n.width()-k.outerWidth(!1)],x="yx"!==p.axis||y[0]||y[1]?"all":"none";"x"===p.axis||y[0]||G(c,w[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:x,dur:0});"y"===p.axis||y[1]||G(c,w[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:x,dur:0})},c[0]._focusTimer))})},aa=function(){var c=b(this).data(at),k=at+"_"+c.idx,e=b("#mCSB_"+c.idx+"_container").parent();e.bind("scroll."+k,function(){0===e.scrollTop()&&0===e.scrollLeft()||b(".mCSB_"+c.idx+"_scrollbar").css("visibility","hidden")})},aj=function(){var c=b(this),t=c.data(at),n=t.opt,p=t.sequential,m=at+"_"+t.idx;b(".mCSB_"+t.idx+"_scrollbar>a").bind("contextmenu."+m,function(d){d.preventDefault()}).bind("mousedown."+m+" touchstart."+m+" pointerdown."+m+" MSPointerDown."+m+" mouseup."+m+" touchend."+m+" pointerup."+m+" MSPointerUp."+m+" mouseout."+m+" pointerout."+m+" MSPointerOut."+m+" click."+m,function(u){function e(k,w){p.scrollAmount=n.scrollButtons.scrollAmount;ac(c,k,w)}if(u.preventDefault(),!u.which||1===u.which){var d=b(this).attr("class");switch(p.type=n.scrollButtons.scrollType,u.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===p.type){break}ai=!0;t.tweenRunning=!1;e("on",d);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===p.type){break}ai=!1;p.dir&&e("off",d);break;case"click":if("stepped"!==p.type||t.tweenRunning){break}e("on",d)}}})},ab=function(){function I(e){function m(p,n){A.type=D.keyboard.scrollType;A.scrollAmount=D.keyboard.scrollAmount;"stepped"===A.type&&C.tweenRunning||ac(E,p,n)}switch(e.type){case"blur":C.tweenRunning&&A.dir&&m("off",null);break;case"keydown":case"keyup":var d=e.keyCode?e.keyCode:e.which,k="on";if("x"!==D.axis&&(38===d||40===d)||"y"!==D.axis&&(37===d||39===d)){if((38===d||40===d)&&!C.overflowed[0]||(37===d||39===d)&&!C.overflowed[1]){break}"keyup"===e.type&&(k="off");b(document.activeElement).is(c)||(e.preventDefault(),e.stopImmediatePropagation(),m(k,d))}else{if(33===d||34===d){if((C.overflowed[0]||C.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type){F(E),d=34===d?-1:1,"x"===D.axis||"yx"===D.axis&&C.overflowed[1]&&!C.overflowed[0]?(e="x",d=Math.abs(y[0].offsetLeft)-d*0.9*x.width()):(e="y",d=Math.abs(y[0].offsetTop)-d*0.9*x.height()),G(E,d.toString(),{dir:e,scrollEasing:"mcsEaseInOut"})}}else{35!==d&&36!==d||(b(document.activeElement).is(c)||((C.overflowed[0]||C.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"!==e.type))||("x"===D.axis||"yx"===D.axis&&C.overflowed[1]&&!C.overflowed[0]?(e="x",d=35===d?Math.abs(x.width()-y.outerWidth(!1)):0):(e="y",d=35===d?Math.abs(x.height()-y.outerHeight(!1)):0),G(E,d.toString(),{dir:e,scrollEasing:"mcsEaseInOut"}))}}}}var E=b(this),C=E.data(at),D=C.opt,A=C.sequential,B=at+"_"+C.idx,t=b("#mCSB_"+C.idx),y=b("#mCSB_"+C.idx+"_container"),x=y.parent(),c="input,textarea,select,datalist,keygen,[contenteditable='true']",w=y.find("iframe"),u=["blur."+B+" keydown."+B+" keyup."+B];w.length&&w.each(function(){b(this).bind("load",function(){q(this)&&b(this.contentDocument||this.contentWindow.document).bind(u[0],function(d){I(d)})})});t.attr("tabindex","0").bind(u[0],function(d){I(d)})},ac=function(I,E,C,D,A){function B(e){y.snapAmount&&(x.scrollAmount=y.snapAmount instanceof Array?"x"===x.dir[0]?y.snapAmount[1]:y.snapAmount[0]:y.snapAmount);var M="stepped"!==x.type,t=A?A:e?M?L/1.5:K:1000/60,k=e?M?7.5:40:2.5,m=[Math.abs(c[0].offsetTop),Math.abs(c[0].offsetLeft)],u=[10<n.scrollRatio.y?10:n.scrollRatio.y,10<n.scrollRatio.x?10:n.scrollRatio.x],k="x"===x.dir[0]?m[1]+x.dir[1]*u[1]*k:m[0]+x.dir[1]*u[0]*k,u="x"===x.dir[0]?m[1]+x.dir[1]*parseInt(x.scrollAmount):m[0]+x.dir[1]*parseInt(x.scrollAmount),k="auto"!==x.scrollAmount?u:k,M=D?D:e?M?"mcsLinearOut":"mcsEaseInOut":"mcsLinear";return e&&17>t&&(k="x"===x.dir[0]?m[1]:m[0]),G(I,k.toString(),{dir:x.dir[0],scrollEasing:M,dur:t,onComplete:!!e}),e?void (x.dir=!1):(clearTimeout(x.step),void (x.step=setTimeout(function(){B()},t)))}var n=I.data(at),y=n.opt,x=n.sequential,c=b("#mCSB_"+n.idx+"_container"),w="stepped"===x.type,L=26>y.scrollInertia?26:y.scrollInertia,K=1>y.scrollInertia?17:y.scrollInertia;switch(E){case"on":if(x.dir=[C===an[16]||C===an[15]||39===C||37===C?"x":"y",C===an[13]||C===an[15]||38===C||37===C?-1:1],F(I),h(C)&&"stepped"===x.type){break}B(w);break;case"off":clearTimeout(x.step),z(x,"step"),F(I),(w||n.tweenRunning&&x.dir)&&B(!0)}},av=function(c){var k=b(this).data(at).opt,e=[];return"function"==typeof c&&(c=c()),c instanceof Array?e=1<c.length?[c[0],c[1]]:"x"===k.axis?[null,c[0]]:[c[0],null]:(e[0]=c.y?c.y:c.x||"x"===k.axis?null:c,e[1]=c.x?c.x:c.y||"y"===k.axis?null:c),"function"==typeof e[0]&&(e[0]=e[0]()),"function"==typeof e[1]&&(e[1]=e[1]()),e},a=function(A,y){if(null!=A&&"undefined"!=typeof A){var w=b(this),x=w.data(at),t=x.opt,x=b("#mCSB_"+x.idx+"_container"),u=x.parent(),c=typeof A;y||(y="x"===t.axis?"x":"y");var t="x"===y?x.outerWidth(!1)-u.width():x.outerHeight(!1)-u.height(),n="x"===y?x[0].offsetLeft:x[0].offsetTop,m="x"===y?"left":"top";switch(c){case"function":return A();case"object":w=A.jquery?A:b(A);if(!w.length){break}return"x"===y?O(w)[1]:O(w)[0];case"string":case"number":return h(A)?Math.abs(A):-1!==A.indexOf("%")?Math.abs(t*parseInt(A)/100):-1!==A.indexOf("-=")?Math.abs(n-parseInt(A.split("-=")[1])):-1!==A.indexOf("+=")?(w=n+parseInt(A.split("+=")[1]),0<=w?0:Math.abs(w)):-1!==A.indexOf("px")&&h(A.split("px")[0])?Math.abs(A.split("px")[0]):"top"===A||"left"===A?0:"bottom"===A?Math.abs(u.height()-x.outerHeight(!1)):"right"===A?Math.abs(u.width()-x.outerWidth(!1)):"first"===A||"last"===A?(w=x.find(":"+A),"x"===y?O(w)[1]:O(w)[0]):b(A).length?"x"===y?O(b(A))[1]:O(b(A))[0]:(x.css(m,A),void ao.update.call(null,w[0]))}}},Q=function(A){function y(){return clearTimeout(m[0].autoUpdate),0===u.parents("html").length?void (u=null):void (m[0].autoUpdate=setTimeout(function(){return n.advanced.updateOnSelectorChange&&(c.poll.change.n=x(),c.poll.change.n!==c.poll.change.o)?(c.poll.change.o=c.poll.change.n,void t(3)):n.advanced.updateOnContentResize&&(c.poll.size.n=u[0].scrollHeight+u[0].scrollWidth+m[0].offsetHeight+u[0].offsetHeight+u[0].offsetWidth,c.poll.size.n!==c.poll.size.o)?(c.poll.size.o=c.poll.size.n,void t(1)):!n.advanced.updateOnImageLoad||"auto"===n.advanced.updateOnImageLoad&&"y"===n.axis||(c.poll.img.n=m.find("img").length,c.poll.img.n===c.poll.img.o)?void ((n.advanced.updateOnSelectorChange||n.advanced.updateOnContentResize||n.advanced.updateOnImageLoad)&&y()):(c.poll.img.o=c.poll.img.n,void m.find("img").each(function(){w(this)}))},n.advanced.autoUpdateTimeout))}function w(d){if(b(d).hasClass(an[2])){return void t()}var e=new Image;e.onload=function(p,k){return function(){return k.apply(p,arguments)}}(e,function(){this.onload=null;b(d).addClass(an[2]);t(2)});e.src=d.src}function x(){!0===n.advanced.updateOnSelectorChange&&(n.advanced.updateOnSelectorChange="*");var e=0,d=m.find(n.advanced.updateOnSelectorChange);return n.advanced.updateOnSelectorChange&&0<d.length&&d.each(function(){e+=this.offsetHeight+this.offsetWidth}),e}function t(d){clearTimeout(m[0].autoUpdate);ao.update.call(null,u[0],d)}var u=b(this),c=u.data(at),n=c.opt,m=b("#mCSB_"+c.idx+"_container");return A?(clearTimeout(m[0].autoUpdate),void z(m[0],"autoUpdate")):void y()},F=function(c){c=c.data(at);b("#mCSB_"+c.idx+"_container,#mCSB_"+c.idx+"_container_wrapper,#mCSB_"+c.idx+"_dragger_vertical,#mCSB_"+c.idx+"_dragger_horizontal").each(function(){this._mTween||(this._mTween={top:{},left:{}});for(var e=["top","left"],d=0;d<e.length;d++){var k=e[d];this._mTween[k].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(this._mTween[k].id):clearTimeout(this._mTween[k].id),this._mTween[k].id=null,this._mTween[k].stop=1)}})},G=function(aD,aC,aA){function aB(d){return az&&aw.callbacks[d]&&"function"==typeof aw.callbacks[d]}function ay(){var k=[Y[0].offsetTop,Y[0].offsetLeft],p=[K[0].offsetTop,K[0].offsetLeft],n=[Y.outerHeight(!1),Y.outerWidth(!1)],m=[X.height(),X.width()];aD[0].mcs={content:Y,top:k[0],left:k[1],draggerTop:p[0],draggerLeft:p[1],topPct:Math.round(100*Math.abs(k[0])/(Math.abs(n[0])-m[0])),leftPct:Math.round(100*Math.abs(k[1])/(Math.abs(n[1])-m[1])),direction:aA.dir}}var az=aD.data(at),aw=az.opt;aA=b.extend({trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:aw.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},aA);var ax=[aA.dur,aA.drag?0:aA.dur],X=b("#mCSB_"+az.idx),Y=b("#mCSB_"+az.idx+"_container"),P=Y.parent(),E=aw.callbacks.onTotalScrollOffset?av.call(aD,aw.callbacks.onTotalScrollOffset):[0,0],T=aw.callbacks.onTotalScrollBackOffset?av.call(aD,aw.callbacks.onTotalScrollBackOffset):[0,0];if(az.trigger=aA.trigger,0===P.scrollTop()&&0===P.scrollLeft()||(b(".mCSB_"+az.idx+"_scrollbar").css("visibility","visible"),P.scrollTop(0).scrollLeft(0)),"_resetY"!==aC||az.contentReset.y||(aB("onOverflowYNone")&&aw.callbacks.onOverflowYNone.call(aD[0]),az.contentReset.y=1),"_resetX"!==aC||az.contentReset.x||(aB("onOverflowXNone")&&aw.callbacks.onOverflowXNone.call(aD[0]),az.contentReset.x=1),"_resetY"!==aC&&"_resetX"!==aC){if(!az.contentReset.y&&aD[0].mcs||!az.overflowed[0]||(aB("onOverflowY")&&aw.callbacks.onOverflowY.call(aD[0]),az.contentReset.x=null),!az.contentReset.x&&aD[0].mcs||!az.overflowed[1]||(aB("onOverflowX")&&aw.callbacks.onOverflowX.call(aD[0]),az.contentReset.x=null),aw.snapAmount){P=aw.snapAmount instanceof Array?"x"===aA.dir?aw.snapAmount[1]:aw.snapAmount[0]:aw.snapAmount,aC=Math.round(aC/P)*P-aw.snapOffset}switch(aA.dir){case"x":var K=b("#mCSB_"+az.idx+"_dragger_horizontal"),S="left",u=Y[0].offsetLeft,M=[X.width()-Y.outerWidth(!1),K.parent().width()-K.width()],L=[aC,0===aC?0:aC/az.scrollRatio.x],W=E[1],c=T[1],V=0<W?W/az.scrollRatio.x:0,I=0<c?c/az.scrollRatio.x:0;break;case"y":K=b("#mCSB_"+az.idx+"_dragger_vertical"),S="top",u=Y[0].offsetTop,M=[X.height()-Y.outerHeight(!1),K.parent().height()-K.height()],L=[aC,0===aC?0:aC/az.scrollRatio.y],W=E[0],c=T[0],V=0<W?W/az.scrollRatio.y:0,I=0<c?c/az.scrollRatio.y:0}0>L[1]||0===L[0]&&0===L[1]?L=[0,0]:L[1]>=M[1]?L=[M[0],M[1]]:L[0]=-L[0];aD[0].mcs||(ay(),aB("onInit")&&aw.callbacks.onInit.call(aD[0]));clearTimeout(Y[0].onCompleteTimeout);U(K[0],S,Math.round(L[1]),ax[1],aA.scrollEasing);!az.tweenRunning&&(0===u&&0<=L[0]||u===M[0]&&L[0]<=M[0])||U(Y[0],S,Math.round(L[0]),ax[0],aA.scrollEasing,aA.overwrite,{onStart:function(){aA.callbacks&&aA.onStart&&!az.tweenRunning&&(aB("onScrollStart")&&(ay(),aw.callbacks.onScrollStart.call(aD[0])),az.tweenRunning=!0,ak(K),az.cbOffsets=[aw.callbacks.alwaysTriggerOffsets||u>=M[0]+W,aw.callbacks.alwaysTriggerOffsets||-c>=u])},onUpdate:function(){aA.callbacks&&aA.onUpdate&&aB("whileScrolling")&&(ay(),aw.callbacks.whileScrolling.call(aD[0]))},onComplete:function(){aA.callbacks&&aA.onComplete&&("yx"===aw.axis&&clearTimeout(Y[0].onCompleteTimeout),Y[0].onCompleteTimeout=setTimeout(function(){aB("onScroll")&&(ay(),aw.callbacks.onScroll.call(aD[0]));aB("onTotalScroll")&&L[1]>=M[1]-V&&az.cbOffsets[0]&&(ay(),aw.callbacks.onTotalScroll.call(aD[0]));aB("onTotalScrollBack")&&L[1]<=I&&az.cbOffsets[1]&&(ay(),aw.callbacks.onTotalScrollBack.call(aD[0]));az.tweenRunning=!1;Y[0].idleTimer=0;ak(K,"hide")},Y[0].idleTimer||0))}})}},U=function(aF,aE,aD,aC,aB,aA,ay){function az(){I.stop||(K||L.call(),K=i()-V,aw(),K>=I.time&&(I.time=K>I.time?K+T-(K-I.time):K+T-1,I.time<K+1&&(I.time=K+1)),I.time<aC?I.id=P(az):W.call())}function aw(){0<aC?(I.currVal=ax(I.time,Y,S,aC,aB),X[aE]=Math.round(I.currVal)+"px"):X[aE]=aD+"px";M.call()}function ax(k,e,p,n,m){switch(m){case"linear":case"mcsLinear":return p*k/n+e;case"mcsLinearOut":return k/=n,k--,p*Math.sqrt(1-k*k)+e;case"easeInOutSmooth":return k/=n/2,1>k?p/2*k*k+e:(k--,-p/2*(k*(k-2)-1)+e);case"easeInOutStrong":return k/=n/2,1>k?p/2*Math.pow(2,10*(k-1))+e:(k--,p/2*(-Math.pow(2,-10*k)+2)+e);case"easeInOut":case"mcsEaseInOut":return k/=n/2,1>k?p/2*k*k*k+e:(k-=2,p/2*(k*k*k+2)+e);case"easeOutSmooth":return k/=n,k--,-p*(k*k*k*k-1)+e;case"easeOutStrong":return p*(-Math.pow(2,-10*k/n)+1)+e;default:return n=(k/=n)*k,m=n*k,e+p*(0.499999999999997*m*n+-2.5*n*n+5.5*m+-6.5*n+4*k)}}aF._mTween||(aF._mTween={top:{},left:{}});var T,P;ay=ay||{};var L=ay.onStart||function(){},M=ay.onUpdate||function(){},W=ay.onComplete||function(){},V=i(),K=0,Y=aF.offsetTop,X=aF.style,I=aF._mTween[aE];"left"===aE&&(Y=aF.offsetLeft);var S=aD-Y;I.stop=0;"none"!==aA&&null!=I.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(I.id):clearTimeout(I.id),I.id=null);(function(){T=1000/60;I.time=K+T;P=window.requestAnimationFrame?window.requestAnimationFrame:function(c){return aw(),setTimeout(c,0.01)};I.id=P(az)})()},i=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},z=function(e,d){try{delete e[d]}catch(k){e[d]=null}},f=function(c){c=c.originalEvent.pointerType;return !(c&&"touch"!==c&&2!==c)},h=function(c){return !isNaN(parseFloat(c))&&isFinite(c)},O=function(d){var c=d.parents(".mCSB_container");return[d.offset().top-c.offset().top,d.offset().left-c.offset().left]},ae=function(){var c=function(){var e=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var d=0;d<e.length;d++){if(e[d]+"Hidden" in document){return e[d]+"Hidden"}}return null}();return c?document[c]:!1};b.fn.mCustomScrollbar=function(c){return ao[c]?ao[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void b.error("Method "+c+" does not exist"):ao.init.apply(this,arguments)};b.mCustomScrollbar=function(c){return ao[c]?ao[c].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?void b.error("Method "+c+" does not exist"):ao.init.apply(this,arguments)};b.mCustomScrollbar.defaults=aq;window.mCustomScrollbar=!0;b(window).bind("load",function(){b(".mCustomScrollbar").mCustomScrollbar();b.extend(b.expr[":"],{mcsInView:b.expr[":"].mcsInView||function(k){var p,n;k=b(k);var m=k.parents(".mCSB_container");if(m.length){return p=m.parent(),n=[m[0].offsetTop,m[0].offsetLeft],0<=n[0]+O(k)[0]&&n[0]+O(k)[0]<p.height()-k.outerHeight(!1)&&0<=n[1]+O(k)[1]&&n[1]+O(k)[1]<p.width()-k.outerWidth(!1)}},mcsInSight:b.expr[":"].mcsInSight||function(t,A,y){var x,u,n,w;t=b(t);A=t.parents(".mCSB_container");y="exact"===y[3]?[[1,0],[1,0]]:[[0.9,0.1],[0.6,0.4]];if(A.length){return x=[t.outerHeight(!1),t.outerWidth(!1)],n=[A[0].offsetTop+O(t)[0],A[0].offsetLeft+O(t)[1]],u=[A.parent()[0].offsetHeight,A.parent()[0].offsetWidth],w=[x[0]<u[0]?y[0]:y[1],x[1]<u[1]?y[0]:y[1]],0>n[0]-u[0]*w[0][0]&&0<=n[0]+x[0]-u[0]*w[0][1]&&0>n[1]-u[1]*w[1][0]&&0<=n[1]+x[1]-u[1]*w[1][1]}},mcsOverflow:b.expr[":"].mcsOverflow||function(c){if(c=b(c).data(at)){return c.overflowed[0]||c.overflowed[1]}}})})})});window.rec_rp=window.rec_rp||function(){(rec_rp.q=rec_rp.q||[]).push(arguments)};function player_fullwin(f){!1==f&&$("#bofqi").removeClass("wide");if(!1!=f||null!==ff_embed_stack){if(null===ff_embed_stack){ff_embed_stack=[];ff_embed_stack_style=[];var d=$("#bofqi").get(0);do{$(d).attr("embed_stack",!0),ff_embed_stack.push(d)}while(d=d.parentNode)}f?($(".rklist").hide(),$("#bofqi").addClass("webfullscreen")):($(".rklist").show(),$("#bofqi").removeClass("webfullscreen"));var d=$("div").not("#bofqi div"),h;for(h in d){if(d[h]&&d[h].getAttribute&&!d[h].getAttribute("embed_stack")&&d[h]&&d[h].style){var g;d[h].getAttribute("ff_id")?g=ff_status[d[h].getAttribute("ff_id")]:(ff_status_id++,d[h].setAttribute("ff_id",ff_status_id),ff_status[ff_status_id]=d[h].style.display);d[h].style.display=f?"none":g}}for(h in ff_embed_stack){(d=ff_embed_stack[h])&&d.style&&(ff_embed_stack_style[h]||(ff_embed_stack_style[h]={position:d.style.position,width:d.style.width,height:d.style.height,padding:d.style.padding,margin:d.style.margin,style:d.style.cssText}),f?(d.style.position="fixed",d.style.width="100%",d.style.height="100%",d.style.padding="0 0",d.style.margin="0 0"):d.style.cssText=ff_embed_stack_style[h].style)}f||(ff_embed_stack=null)}}var ff_status={},ff_status_id=0,ff_embed_stack=null,ff_embed_stack_style=null;function player_widewin(){$("#bofqi").removeClass("webfullscreen");$("#bofqi").addClass("wide")}function heimu(d,c){$("#heimu");0==c?($("#heimu").hide(),$("#bofqi").removeClass("heimu")):($("#bofqi").addClass("heimu"),$("#heimu").css("opacity","."+d/10),$("#heimu").css("filter","alpha(opacity="+d+")"),$("#heimu").show())}function getAuthorInfo(){var f,d=parseInt(window.mid),h,g=!1;0<=$.inArray(d,window.AttentionList)&&(g=!0);$(".upinfo").length?(f=$(".upinfo"),h=$(".name",f).text(),f=$(".u-face img",f).attr("src")):($upinfo=$(".zu_play_info"),h=$(".upload_user a",f).attr("card"),f=$(".upload_user img",f).attr("src"));return{mid:d,uname:h,face:f,attention:g}}function flashChecker(){var f,d=!1,h=0;if(navigator.plugins&&0<navigator.plugins.length&&(f=navigator.plugins["Shockwave Flash"])){d=!0;f=f.description.split(" ");for(var g=0;g<f.length;++g){isNaN(parseInt(f[g]))||(h=parseInt(f[g]))}}return{hasFlash:d,flashVersion:h}}function loadHTML5(f,d){var h=null!=navigator.userAgent.match(/iPad/i)||null!=navigator.userAgent.match(/iPhone/i)||null!=navigator.userAgent.match(/iPod/i),g=null!=navigator.userAgent.match(/Android/i);flashChecker().hasFlash||!h&&!g||(h=1==Number(d)?"":"#page="+d,!/iPad/.test(navigator.userAgent)&&"#html5"!=location.hash||"YESYESYES"==GrayManager.ChatGetSettings("bilibililover")?__GetCookie("nmr")&&"0"!=__GetCookie("nmr")||window.location.replace("/mobile/video/av"+f+".html"+h):($("#bofqi").html('<link type="text/css" href="//static.hdslb.com/css/simple.v2.min.css" rel="stylesheet" />'),$.getScript("//static.hdslb.com/js/simple.v2.min.js",function(){(new BiliH5Player).create({aid:f,page:d})}),$("#bofqi").prepend('<div class="main-inner"><div class="app-banner"><div class="app-banner-left"><div class="app-banner-title">\u4e0abilibili\u5ba2\u6237\u7aef</div><div class="app-banner-content">\u9ad8\u6e05\u52a8\u753b \u79bb\u7ebf\u89c2\u770b \u5e94\u6709\u5c3d\u6709</div></div><div class="app-banner-right"><a class="app-open-btn">\u7528\u5ba2\u6237\u7aef\u6253\u5f00</a><a class="app-dl-btn">\u7acb\u5373\u4e0b\u8f7d</a></div></div></div>'),$(".app-banner .app-open-btn").bindApplink({aid:f}),getDownloadUrl($(".app-banner .app-dl-btn"))))}function deltaFilter(d){var c=0;d.wheelDelta||d.deltaY?(c=(d.wheelDelta||40*-d.deltaY)/40,window.opera&&(c=-c)):d.detail&&(c=-d.detail);return c}var aid,cid,GrayManager={gray_flash_enable:!1,gray_html5_enable:!1,initialTime:+new Date,fixTime:0,overtime:15000,gray_config_flash:{cookie_name:"player_gray",new_player:"//static.hdslb.com/play200.swf",suffixes:["01","02","03","04","05"],track:{old:{click_event_name:"oldver_click",show_event_name:"oldver_show"},"new":{click_event_name:"newver_click",show_event_name:"newver_show"}}},gray_config_html5:{hash:"45ac2299",version:"0.9.13",cookie_name:"html5_player_gray",new_player:"//static.hdslb.com/player/js/bilibiliPlayer.beta.min.js",suffixes:"123456789".split(""),track:{"new":{click_event_name:"newver_h5_click",show_event_name:"newver_h5_show"},old:{click_event_name:"oldver_h5_click",show_event_name:"oldver_h5_show"}}},gray_config_html5_flash:{hash:"45ac2299",version:"0.9.13",track:{"new":{click_event_name:"HTML5_click",show_event_name:"HTML5_show"},old:{click_event_name:"Flash_click",show_event_name:"Flash_show"}}},HashManage:{prependHash:"!",_change:function(s,r){var q=location.hash,l={},g="",j=0;q&&(q=q.substring(1),this.prependHash&&(q=q.replace(RegExp("^"+this.prependHash.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")),"")));for(var q=q.split("&"),o=0;o<q.length;o++){var t=q[o].split("=")[0],h=q[o].split("=")[1];t&&(l[t]=decodeURIComponent(h))}if("object"==typeof s){for(var i in s){(q=s[i])?l[i]=encodeURIComponent(q):!1===q&&delete l[i]}}else{if(r){l[s]=encodeURIComponent(r)}else{if(!1===r){delete l[s]}else{return"undefined"==typeof s?l:l[s]||null}}}for(var f in l){g=0!=j?g+"&":g+this.prependHash,g+=f+"="+l[f],j++}location.hash=g;return l},get:function(b){return this._change(b,null)},set:function(d,c){return this._change(d,c)},clear:function(){location.hash=""}},isUndefined:function(b){return"undefined"===typeof b},cookie:{get:function(f){var d=""+document.cookie,h=d.indexOf(f+"=");if(-1==h||""==f){return""}var g=d.indexOf(";",h);-1==g&&(g=d.length);return unescape(d.substring(h+f.length+1,g))},set:function(f,d,h){h=void 0!==h?h:365;var g=new Date;g.setTime(g.getTime()+86400000*h);document.cookie=f+"="+escape(d)+";expires="+g.toGMTString()+"; path=/; domain=.bilibili.com"},"delete":function(b){this.set(b,"",-1)}},ChatGetSettings:function(b){return this.localStorage._support?this.localStorage.getItem(b):this.cookie.get(b)},ChatSaveSettings:function(e,d,f){return this.localStorage._support?this.localStorage.setItem(e,d):this.cookie.set(e,d,f)},localStorage:{_support:window.localStorage&&"object"==typeof window.localStorage?!0:!1,getItem:function(b){return this._support?window.localStorage.getItem(b):null},setItem:function(d,c){this._support&&window.localStorage.setItem(d,c)},removeItem:function(b){this.getItem(b)&&window.localStorage.removeItem(b)}},initialized:!1,pageno:1,enable:!1,player_params:null,callbackFn:null,upgrade:void 0,cooperation:!1,iframe:!1,is_unsupport_html5:/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())||/Trident/i.test(navigator.userAgent)&&/Windows NT 6/.test(navigator.userAgent),gray_flash:!1,gray_html5:!0,gray_support_html5:!1,isSafari:/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(navigator.userAgent.toLowerCase())||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(navigator.userAgent.toLowerCase()),init:function(o,m,l,i){function f(){h._isDocumentHidden()||(h.fixTime=+new Date-h.hidden_start_time)}var h=this;setTimeout(function(){window.miniPlayer||(window.miniPlayer=function(){var y=$("#bofqi");if((0<y.find("iframe").length||0<y.find("embed").length&&0<=y.find("embed").attr("src").indexOf("play.swf")||0<y.find("#player_placeholder").length)&&0==$("#sponsor_list").length&&($(".v_small").length||$(".recom").length)){var x=y.offset().top+y.height()+100,v=0,u=!1;$('<input type="checkbox" id="checkbox_miniplayer" /><label class="no-select" for="checkbox_miniplayer">\u5f00\u542f\u8ff7\u4f60\u64ad\u653e\u5668</label>').appendTo(".common .b-head");var t=$("#checkbox_miniplayer"),r=null;1!=h.ChatGetSettings("b_miniplayer")&&null!=h.ChatGetSettings("b_miniplayer")||t.attr("checked",!0);t.change(function(){var a=$(this).is(":checked")?1:0;h.ChatSaveSettings("b_miniplayer",a);0==a?(u=!0,z()):(x==y.offset().top+y.height()+100||y.hasClass("float")||(x=y.offset().top+y.height()+100),$(window).scrollTop()>x&&(u=!1,s()))});var s=function(){if(!y.hasClass("float")&&!u&&0!=$(".comm").find("ul").length){var a=$('<div class="dami"></div>').insertBefore(y);y.hasClass("wide")&&a.addClass("wide");$('<div class="move"><div class="gotop">\u56de\u5230\u9876\u90e8</div><div class="t">\u70b9\u51fb\u6309\u4f4f\u62d6\u52a8</div><div class="close">\u5173\u95ed</div></div>').prependTo(y);0<$(".huodong_bg").length&&$(".huodong_bg").hide();y.addClass("float").stop().animate({opacity:1},300);r?y.css(r):(a=0,0<$(".rat").length?a=$(".rat").offset().left:0<$(".v_small").length?a=$(".v_small").offset().left:0<$(".recom").length&&(a=$(".recom").offset().left),y.css({left:a,opacity:0}),730>=$(window).height()&&y.css({top:"inherit",bottom:"5px"}))}},z=function(){k();$(".move",y).remove();$(".dami").remove();y.removeClass("float");y.css({left:"",top:"",bottom:""});0<$(".huodong_bg").length&&$(".huodong_bg").show()},k=function(){v=0;$(".mmask").remove();$(document).unbind("mousemove");$("body,#bofqi").removeClass("noselect");$(".move",y).removeClass("on")};$(document).on("scroll.miniplayer",function(){0!=h.ChatGetSettings("b_miniplayer")&&(x==y.offset().top+y.height()+100||y.hasClass("float")||(x=y.offset().top+y.height()+100),$(window).scrollTop()>x?s():(u&&(u=!1),y.hasClass("float")&&z()))});y.hover(function(){y.hasClass("float")&&!v&&$(".move",y).show()},function(){v||$(".move",y).hide()});$(y).delegate(".move","mousedown",function(a){v=1;$("body,#bofqi").addClass("noselect");$(this).addClass("on");$('<div class="mmask"></div>').appendTo("body");var n=a.pageX-$(this).offset().left,c=a.pageY-$(this).offset().top;$(document).bind("mousemove",function(d){var p=d.clientX-n,e=d.clientY-c<=$(window).height()-y.height()?d.clientY-c:$(window).height()-y.height(),e=d.clientY-c>=$(window).height()-y.height()-5?$(window).height()-y.height()-5:0>=d.clientY-c?0:d.clientY-c;r={left:p,top:e};y.css(r)})});$(y).delegate(".move","mouseup",function(b){k()});$(y).delegate(".move .close","click",function(b){u=!0;z()});$(y).delegate(".move .gotop","click",function(b){$("html,body").animate({scrollTop:$(".viewbox").offset().top},300)})}},window.miniPlayer())},3000);if(this.initialized){return !1}$('<link rel="stylesheet" type="text/css" href="//static.hdslb.com/plugins/mCustomScrollbar/jquery.mCustomScrollbar.min.css" />').appendTo("body");this.initialized=!0;if(null!=navigator.userAgent.match(/iPad/i)&&"YESYESYES"!=this.ChatGetSettings("bilibililover")&&!/bangumi/.test(window.location.href)){return"function"===typeof i&&i(),!1}this.pageno=window.pageno||1;this.player_params=o;this.upgrade=m;this.callbackFn=l;o&&!o.match(/cid=(\d+)\&/)&&(this.cooperation=!0);/bangumi/.test(window.location.href)&&!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())?(document.domain="bilibili.com",h=this,this.isSafari?this._init(i):this.loadLocalStorage(function(){h._init(i)})):this._init(i);try{var j=this._getHiddenProp();if(j){var q=j.replace(/[H|h]idden/,"")+"visibilitychange";this.hidden_start_time=+new Date;document.addEventListener(q,f)}}catch(g){console.warn(g)}},_init:function(b){if(this.storageLoaded){return !1}this.storageLoaded=!0;this.gray_issupport_html5();this.gray_judge_flash();this.gray_judge_html5();1==this.ChatGetSettings("defaulth5")?this.gray_html5?(this.enable=!0,this.gray_initial_html5()):this.gray_flash?(this.enable=!0,this.gray_initial_flash()):this.no_gray_initial():this.gray_flash?(this.enable=!0,this.gray_initial_flash()):this.gray_html5?(this.enable=!0,this.gray_initial_html5()):this.no_gray_initial();"function"===typeof b&&b()},reload:function(d){if(!this.player_params){return window.location.reload(),!0}try{window.swfobject&&window.swfobject.removeSWF("player_placeholder"),window.player&&window.player.pause(),window.player&&window.player.destroy&&window.player.destroy(),this.HashManage.get("page")&&(this.pageno=window.pageno=this.HashManage.get("page")||1)}catch(c){console.log(c)}this.initialReset();if(this.player_params=d||this.player_params){window.aid=d.match(/aid=(\d+)/)[1],window.cid=d.match(/cid=(\d+)\&/),window.cid&&(window.cid=window.cid[1])}this.gray_support_html5&&("html5"===this.player_type||!this.player_type&&1==this.ChatGetSettings("defaulth5"))?this.gray_loader_html5():this.gray_loader_flash()},storageTimer:null,feedback:null,loadLocalStorage:function(e){var d=this,f=["bilibililover","defaulth5","firstentergraytest","bilibili_player_settings"];this._iframe=document.createElement("iframe");this._iframe.style.cssText="position:absolute;width:1px;height:1px;left:-9999px;";this._iframe.src="//www.bilibili.com/blackboard/iframemessage.html";document.body.appendChild(this._iframe);this._iframe.addEventListener&&this._iframe.addEventListener("load",function(){try{for(var b in f){window.localStorage.setItem(f[b],d._iframe.contentWindow.localStorage.getItem(f[b]))}}catch(a){}clearTimeout(d.storageTimer);e()});this.storageTimer=setTimeout(function(){e()},500)},setLocalStorage:function(f,d){try{this.ChatSaveSettings(f,d)}catch(h){}if(this._iframe){try{this._iframe.contentWindow.localStorage.setItem(f,d)}catch(g){}}},GetUrlValue:function(d){d=RegExp("(^|&)"+d+"=([^&]*)(&|$)","i");d=window.location.search.substr(1).match(d);if(null!=d){try{return decodeURIComponent(d[2])}catch(c){}}return null},gray_loader:function(f,d,j,i,h,g){this.gray_support_html5&&("html5"===i||!i&&1==this.ChatGetSettings("defaulth5"))?this.gray_loader_html5(h):this.gray_loader_flash(h)},update_params:function(e){e&&this.search_new_cid();e={};player_params=this.player_params.split("&");for(var d=0;d<player_params.length;d++){if(""!=player_params[d]){var f=player_params[d].split("=");e[f[0]]=f[1]}}window.aid&&(e.aid=window.aid);window.cid&&(e.cid=window.cid);return e},search_new_cid:function(){var b=this;"undefined"===typeof window.pageno?window.pageno=this.pageno:window.pageno!=this.pageno&&$.ajax({url:"//www.bilibili.com/widget/getPageList?aid="+window.aid,cache:!0,type:"get",xhrFields:{withCredentials:!0},async:!1,dataType:"json",success:function(a){if(a){for(var d in a){a[d].page==window.pageno&&(window.cid=a[d].cid,b.pageno=window.pageno)}}},error:function(){}})},loadFeedback:function(d){var c=this;$.ajax({url:"//static.hdslb.com/player/feedback/feedback.min.js",cache:!0,type:"get",dataType:"script",beforeSend:function(){$(".player-wrapper").find(".bgray-btn-wrap").find(".bgray-btn.show").addClass("player-feedback-disable")},success:function(a){$(".player-wrapper").find(".bgray-btn-wrap").find(".bgray-btn.show").removeClass("player-feedback-disable");c.feedback=new window.FeedBackInstance;"function"===typeof d&&d()},error:function(){$(".player-wrapper").find(".bgray-btn-wrap").find(".bgray-btn.show").removeClass("player-feedback-disable")}})},_loadNoFlashTips:function(){var b=this;$.ajax({url:"//static.hdslb.com/player/noflashtips/no-flash-tips.min.js",cache:!0,type:"get",dataType:"script",success:function(){b._createNoFlashTipsInstance()}})},_getNoFlashTips:function(){window.NoFlashTips?this._createNoFlashTipsInstance():this._loadNoFlashTips()},_createNoFlashTipsInstance:function(){var d=this,c={backgroundColor:"white",msg:"\u4e3b\u4eba\uff0c\u672a\u5b89\u88c5Flash\u63d2\u4ef6\uff0c\u6682\u65f6\u65e0\u6cd5\u89c2\u770b\u89c6\u9891\uff0c\u60a8\u53ef\u4ee5\u2026",msgColor:"#000",msgSize:14,btnList:[{title:"\u4e0b\u8f7dFlash\u63d2\u4ef6",width:166,height:40,type:"flash",theme:"white"}],hasOrText:!1};this.is_unsupport_html5||(c.btnList[0].theme="white",c.btnList.push({title:"\u4f7f\u7528HTML5\u64ad\u653e\u5668",width:166,height:40,type:"html5",theme:"blue",onClick:function(a){d.html5_btn.trigger("click",!0);"function"===typeof a&&a()}}));new NoFlashTips($("#bofqi")[0],c)},getFeedback:function(){var d=this,c=0<$(".player-wrapper").find(".bgray-btn-wrap").find(".player-feedback-disable").length;window.FeedBackInstance||d.feedback||c?d.feedback&&d.feedback.show():d.loadFeedback(function(){d.feedback&&d.feedback.show()})},no_gray_initial:function(){$("#bofqi .b-player-gray").remove();var f=this,d=this.gray_config_html5_flash.track;flashChecker().hasFlash||f.setLocalStorage("defaulth5",1);var h=$("#bofqi").parent(),g=$('<div class="bgray-btn-wrap"></div>').prependTo(h);$("<style>.player-wrapper {position: relative;} .player-fullscreen-fix {position: fixed;top: 0;left: 0;margin: 0;padding: 0;width: 100%;height: 100%;}.player-fullscreen-fix #bofqi .player {position: fixed!important;border-radius: 0;z-index: 100000!important;left: 0;top: 0;width: 100%!important;height: 100%!important;}.bgray-btn-wrap {position: absolute; top: 10px; left: 50%; margin-left: 490px; width: 70px; height: 200px;} .widescreen .bgray-btn-wrap {margin-left: 580px;} .bgray-btn {transition: all 0.3s; cursor: pointer; margin: 10px 0; background-color: #fff; text-align: center; padding: 7px 5px; display: block; left: 100%; font-size: 12px; line-height: 14px; margin-left: 10px; width: 20px; height: 58px; border-radius: 4px; border: 1px solid #e5e9ef; color: #99a2aa;} .bgray-btn:hover {color: #6d757a; border-color: #6d757a;}.bgray-btn.player-feedback-disable{color:#ccd0d7}.bgray-btn.player-feedback-disable:hover{color:#ccd0d7;border-color:#ccd0d7;} .bgray-btn.player-feedback-disable{color:#ccd0d7}.bgray-btn.player-feedback-disable:hover{color:#ccd0d7;border-color:#ccd0d7;} .bgray-btn.active {cursor: default; color: #00a1d6; border-color: #00a1d6;}"+(h.hasClass("movie_play")?".movie_play {overflow: visible;} .bgray-btn-wrap {top: -10px;} #bofqi {box-shadow: 0 0 0;}":"")+".bgray-line {display: none; width: 42px; margin: 0 auto; border-bottom: 1px solid #e5e9ef;}.bgray-btn {display: none;} .bgray-btn.show {display: block;}@media screen and (min-width: 1400px) {.bgray-btn-wrap {margin-left: 580px;}}</style>").appendTo("head");this.notice_btn=$('<div class="bgray-btn show">\u610f\u89c1<br/>\u53cd\u9988</div>').appendTo(g).click(function(){f.getFeedback()});this.html5_btn=$('<div class="bgray-btn">HTML5<br/>\u64ad\u653e\u5668</div>').prependTo(g).click(function(b,a){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_html5(!1),f.ChatGetSettings("firstentergraytest")!=f.gray_config_html5_flash.version&&f.setLocalStorage("firstentergraytest",f.gray_config_html5_flash.version),a||rec_rp("event",d["new"].click_event_name),f.cookie.set(f.gray_config_html5.cookie_name,!1,7))});this.flash_btn=$('<div class="bgray-btn">Flash<br/>\u64ad\u653e\u5668</div>').prependTo(g).click(function(){$(this).hasClass("active")||(window.player&&window.player.destroy&&window.player.destroy(),$(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_flash(!1),rec_rp("event",d.old.click_event_name),f.cookie.set(f.gray_config_flash.cookie_name,!1,7))})},gray_judge_flash:function(){var e=this.gray_config_flash.cookie_name;if(this.isUndefined(this.upgrade)||""===this.upgrade){this.upgrade="false"!==this.cookie.get(e)}if(!this.gray_flash_enable||!this.player_params){return this.gray_flash=!1}var d;try{d=this.cookie.get("DedeUserID").slice(-2),this.gray_flash=-1<$.inArray(d,this.gray_config_flash.suffixes)}catch(f){this.gray_flash=!1}return this.gray_flash},get_ip_crc:function(f){function d(i,c){for(var k=~i,j=c.length,l=0;l<j;l++){k=h[k&255^c[l]]^k>>>8}return ~k>>>0}var h=function(){for(var j=[],i=0;256>i;i++){for(var l=i,k=0;8>k;k++){l=1==(l&1)?l>>>1^3988292384:l>>>1}j[i]=l>>>0}return j}(),g=new (function(){function b(){this.value=0}b.prototype.reset=function(){this.value=0};b.prototype.update=function(i){if("string"==typeof i){for(var n=this.value^-1,k=0,j=i.length,c,l;k<j;){c=i.charCodeAt(k++),128>c?n=n>>>8^h[(n^c)&255]:2048>c?(n=n>>>8^h[(n^(192|c>>6&31))&255],n=n>>>8^h[(n^(128|c&63))&255]):55296<=c&&57344>c?(c=(c&1023)+64,l=i.charCodeAt(k++)&1023,n=n>>>8^h[(n^(240|c>>8&7))&255],n=n>>>8^h[(n^(128|c>>2&63))&255],n=n>>>8^h[(n^(128|l>>6&15|(c&3)<<4))&255],n=n>>>8^h[(n^(128|l&63))&255]):(n=n>>>8^h[(n^(224|c>>12&15))&255],n=n>>>8^h[(n^(128|c>>6&63))&255],n=n>>>8^h[(n^(128|c&63))&255])}this.value=(n^-1)>>>0}else{if(i instanceof Uint8Array||-1!=i.constructor.toString().indexOf("Uint8Array")){this.value=d(this.value,i)}else{if(i instanceof ArrayBuffer||-1!=i.constructor.toString().indexOf("ArrayBuffer")){this.value=d(this.value,new Uint8Array(i,0,i.byteLength))}}}};b.prototype.finish=function(){return this.value};return b}());g.reset();g.update(f);this.cookie.set("HTML5PlayerCRC32",g.finish())},gray_initial_flash:function(){$("#bofqi .b-player-gray").remove();var f=this,d=this.gray_config_flash.track,i=this.gray_config_flash.cookie_name,h=$("#bofqi").parent(),g=$('<div class="bgray-btn-wrap"></div>').prependTo(h);$("<style>.player-wrapper {position: relative;} .player-fullscreen-fix {position: fixed;top: 0;left: 0;margin: 0;padding: 0;width: 100%;height: 100%;}.player-fullscreen-fix #bofqi .player {position: fixed!important;border-radius: 0;z-index: 100000!important;left: 0;top: 0;width: 100%!important;height: 100%!important;}.bgray-btn-wrap {position: absolute; top: 10px; left: 50%; margin-left: 490px; width: 70px; height: 200px;} .widescreen .bgray-btn-wrap {margin-left: 580px;} .bgray-btn {transition: all 0.3s; cursor: pointer; margin: 10px 0; background-color: #fff; text-align: center; padding: 7px 5px; display: block; left: 100%; font-size: 12px; line-height: 14px; margin-left: 10px; width: 20px; height: 58px; border-radius: 4px; border: 1px solid #e5e9ef; color: #99a2aa;} .bgray-btn:hover {color: #6d757a; border-color: #6d757a;} .bgray-btn.player-feedback-disable{color:#ccd0d7}.bgray-btn.player-feedback-disable:hover{color:#ccd0d7;border-color:#ccd0d7;} .bgray-btn.active {cursor: default; color: #00a1d6; border-color: #00a1d6;}"+(h.hasClass("movie_play")?".movie_play {overflow: visible;} .bgray-btn-wrap {top: -10px;} #bofqi {box-shadow: 0 0 0;} .movie_over {z-index: 10021;}":"")+".bgray-line {display: none; width: 42px; margin: 0 auto; border-bottom: 1px solid #e5e9ef;}.bgray-btn {display: none;} .bgray-btn.show {display: block;}@media screen and (min-width: 1400px) {.bgray-btn-wrap {margin-left: 580px;}}</style>").appendTo("head");this.notice_btn=$('<div class="bgray-btn show">\u610f\u89c1<br/>\u53cd\u9988</div>').appendTo(g).click(function(){f.getFeedback()});$('<div class="bgray-line"></div>').prependTo(g);this.flash_btn=$('<div class="bgray-btn '+(this.upgrade?"":"active")+'" type="old">\u65e7\u7248<br/>\u64ad\u653e\u5668</div>').prependTo(g);this.flash_new_btn=$('<div class="bgray-btn '+(this.upgrade?"active":"")+'" type="new">\u65b0\u7248<br/>\u64ad\u653e\u5668</div>').prependTo(g);f=this;g.find(".bgray-btn").click(function(){var a=$(this).attr("type");a&&!$(this).hasClass("active")&&($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_flash("new"===a),rec_rp("event",d[a].click_event_name),f.cookie.set(i,"old"===a?!1:!0,7))});rec_rp("event",this.upgrade?d["new"].show_event_name:d.old.show_event_name);this.html5_new_btn=$('<div class="bgray-btn">\u65b0\u7248HTML5<br/>\u64ad\u653e\u5668</div>').prependTo(g).hide().click(function(a,e){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_html5(!0),e||rec_rp("event",f.gray_config_html5.track["new"].click_event_name),f.cookie.set(f.gray_config_html5.cookie_name,!0,7))});this.html5_btn=$('<div class="bgray-btn">HTML5<br/>\u64ad\u653e\u5668</div>').prependTo(g).hide().click(function(a,e){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_html5(!1),e||rec_rp("event",f.gray_config_html5.track.old.click_event_name),f.cookie.set(f.gray_config_html5.cookie_name,!1,7))})},initialReset:function(){this.initialTime=+new Date;this.fixTime=0;this._track_load=this._track_init=!1},gray_loader_flash:function(b){this.upgrade="undefined"===typeof b||""===b?this.gray_flash?"false"!==this.cookie.get(this.gray_config_flash.cookie_name):!1:b;1==this.ChatGetSettings("defaulth5")&&this.setLocalStorage("defaulth5",0);if(!flashChecker().hasFlash){return this._getNoFlashTips(),!1}this.iframe?$("#bofqi").html('<iframe height="482" width="950" class="player" src="https://secure.bilibili.com/secure,cid='+window.cid+"&aid="+window.aid+'" scrolling="no" border="0" frameborder="no" framespacing="0" onload="window.securePlayerFrameLoaded=true"></iframe><img src="https://secure.bilibili.com/images/grey.gif" id="img_ErrCheck" style="display:none" /><script type="text/javascript" src="//static.hdslb.com/js/page.player_error.js">\x3c/script>'):(b=this.update_params(),$("#bofqi").html('<div id="player_placeholder" class="player"></div>'),swfobject.embedSWF(this.upgrade?this.gray_config_flash.new_player:"//static.hdslb.com/play.swf","player_placeholder","950","482","0","",b,{bgcolor:"#ffffff",allowfullscreeninteractive:"true",allowfullscreen:"true",quality:"high",allowscriptaccess:"always",wmode:/Firefox\/49\.0/.test(navigator.userAgent)?"opaque":"direct"},{"class":"player"},this.callbackFn),this.flash_loader_timeout(),this.gray_flash_compatible())},flash_loader_timeout:function(){var b=this;this.flash_loader_timer=setTimeout(function(){try{!b.html5_btn||(b._isDocumentHidden()||b.iframe||"0"==b.ChatGetSettings("defaulth5"))||(b._sendInitialTime("html5",+new Date-performance.timing.navigationStart,"overtime_change"),b.initialReset(),b.html5_btn.click())}catch(a){console.warn(a)}},this.overtime)},gray_flash_compatible:function(){window.player={};var e={video_media_buffer:"jwplayerMediaBuffer",video_media_buffer_full:"jwplayerMediaBufferFull",video_media_ended:"jwplayerMediaComplete",video_media_error:"jwplayerMediaError",video_media_loaded:"jwplayerMediaLoaded",video_media_mute:"jwplayerMediaMute",video_media_seek:"jwplayerMediaSeek",video_media_time:"jwplayerMediaTime",video_media_volume:"jwplayerMediaVolume"},d={reloadAccess:"mukio_reloadAccess",play:"jwPlay",pause:"jwPause",stop:"jwStop",seek:"jwSeek",prev:"jwPlaylistPrev",next:"jwPlaylistNext",getBufferRate:"jwGetBuffer",getDuration:"jwGetDuration",isFullScreen:"jwGetFullscreen",getWidth:"jwGetWidth",getHeight:"jwGetHeight",isMute:"jwGetMute",setMute:"jwSetMute",getPlaylist:"jwGetPlaylist",getPlaylistIndex:"jwGetPlaylistIndex",getCurrentTime:"jwGetPosition",getState:"jwGetState",getVersion:"jwGetVersion",getPlayurl:"jwGetPlayurl",volume:"jwGetVolume|jwSetVolume"},f;for(f in d){(function(g,c){window.player[g]=function(){var a=document.getElementById("player_placeholder");if(a){if("function"===typeof a[c]){return a[c].apply(a,arguments)}if("volume"===g&&"function"===typeof a.volume){return 0===arguments.length?a.jwGetVolume.apply(a,arguments):a.jwSetVolume.apply(a,arguments)}}}})(f,d[f])}window.player.addEventListener=function(a,i){try{"function"===typeof i&&(i=""+i)}catch(g){i="function(){}"}var h=document.getElementById("player_placeholder");e[a]&&h&&h.jwAddEventListener&&h.jwAddEventListener(e[a],i)};window.player.removeEventListener=function(a){var g=document.getElementById("player_placeholder");e[a]&&g&&g.jwRemoveEventListener&&g.jwRemoveEventListener(e[a])}},gray_issupport_html5:function(){if(this.is_unsupport_html5){return this.gray_support_html5=!1}(/linux/i.test(navigator.userAgent.toLowerCase())||/Mac OS X[\s\_\-\/](\d+[\.\-\_]\d+[\.\-\_]?\d*)/i.test(navigator.userAgent)||!flashChecker().hasFlash||this.default_html5_policy())&&null==this.ChatGetSettings("defaulth5")&&this.setLocalStorage("defaulth5",1);if($("#bofqi").length){if($("#bofqi").find("iframe.player").length&&!$("#bofqi").find("iframe.player").hasClass("bilibiliHtml5Player")){var e=$("iframe.player").attr("src").match(/aid=(\d+)/),d=$("iframe.player").attr("src").match(/cid=(\d+)\&/),f=$("iframe.player").attr("src").match(/pre_ad=(\d+)/);e&&(e[1]&&d&&d[1])&&(window.aid=e[1],window.cid=d[1],this.iframe=this.gray_support_html5=!0,this.player_params="cid="+d[1]+"&aid="+e[1]+"&pre_ad="+(f?f[1]:"0"))}else{this.cooperation||$("#bofqi").find("embed").length||(this.gray_support_html5=!0)}}},default_html5_policy:function(){try{return/Windows NT.*Chrome\/[5-9]\d/.test(navigator.userAgent)?!0:!1}catch(b){return !1}},gray_judge_html5:function(){var e=this.gray_config_html5.cookie_name;if(this.isUndefined(this.upgrade)||""===this.upgrade){this.upgrade="false"!==this.cookie.get(e)}if(!this.gray_html5_enable||!this.player_params){return this.gray_html5=!1}var d;try{d=this.cookie.get("DedeUserID").slice(-1),this.gray_html5=-1<$.inArray(d,this.gray_config_html5.suffixes)}catch(f){this.gray_html5=!1}return this.gray_html5},gray_initial_html5:function(){var f=this,d=this.gray_config_html5.track,i=this.gray_config_flash.track;flashChecker().hasFlash||null!=this.ChatGetSettings("defaulth5")||f.setLocalStorage("defaulth5",1);var h=$("#bofqi").parent(),g=$('<div class="bgray-btn-wrap"></div>').prependTo(h);$("<style>.player-wrapper {position: relative;} .player-fullscreen-fix {position: fixed;top: 0;left: 0;margin: 0;padding: 0;width: 100%;height: 100%;}.player-fullscreen-fix #bofqi .player {position: fixed!important;border-radius: 0;z-index: 100000!important;left: 0;top: 0;width: 100%!important;height: 100%!important;}.bgray-btn-wrap {position: absolute; top: 10px; left: 50%; margin-left: 490px; width: 70px; height: 200px;} .widescreen .bgray-btn-wrap {margin-left: 580px;} .bgray-btn {transition: all 0.3s; cursor: pointer; margin: 10px 0; background-color: #fff; text-align: center; padding: 7px 5px; display: block; left: 100%; font-size: 12px; line-height: 14px; margin-left: 10px; width: 20px; height: 58px; border-radius: 4px; border: 1px solid #e5e9ef; color: #99a2aa;} .bgray-btn:hover {color: #6d757a; border-color: #6d757a;} .bgray-btn.player-feedback-disable{color:#ccd0d7}.bgray-btn.player-feedback-disable:hover{color:#ccd0d7;border-color:#ccd0d7;} .bgray-btn.active {cursor: default; color: #00a1d6; border-color: #00a1d6;}"+(h.hasClass("movie_play")?".movie_play {overflow: visible;} .bgray-btn-wrap {top: -10px;} #bofqi {box-shadow: 0 0 0;} .movie_over {z-index: 10021;}":"")+".bgray-line {display: none; width: 42px; margin: 0 auto; border-bottom: 1px solid #e5e9ef;}.bgray-btn {display: none;} .bgray-btn.show {display: block;}@media screen and (min-width: 1400px) {.bgray-btn-wrap {margin-left: 580px;}}</style>").appendTo("head");this.notice_btn=$('<div class="bgray-btn show">\u610f\u89c1<br/>\u53cd\u9988</div>').appendTo(g).click(function(){f.getFeedback()});$('<div class="bgray-line"></div>').prependTo(g);this.flash_btn=$('<div class="bgray-btn">Flash<br/>\u64ad\u653e\u5668</div>').prependTo(g).click(function(){$(this).hasClass("active")||(window.player&&window.player.destroy&&window.player.destroy(),$(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_flash(!1),rec_rp("event",i.old.click_event_name),f.cookie.set(f.gray_config_flash.cookie_name,!1,7))});this.html5_new_btn=$('<div class="bgray-btn">\u65b0\u7248HTML5<br/>\u64ad\u653e\u5668</div>').prependTo(g).click(function(b,a){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_html5(!0),f.ChatGetSettings("firstentergraytest")!=f.gray_config_html5.version&&f.setLocalStorage("firstentergraytest",f.gray_config_html5.version),a||rec_rp("event",d["new"].click_event_name),f.cookie.set(f.gray_config_html5.cookie_name,!0,7))});this.html5_btn=$('<div class="bgray-btn">HTML5<br/>\u64ad\u653e\u5668</div>').prependTo(g).click(function(b,a){$(this).hasClass("active")||($(this).siblings().removeClass("active"),$(this).addClass("active"),f.initialReset(),f.gray_loader_html5(!1),f.ChatGetSettings("firstentergraytest")!=f.gray_config_html5_flash.version&&f.setLocalStorage("firstentergraytest",f.gray_config_html5_flash.version),a||rec_rp("event",d.old.click_event_name),f.cookie.set(f.gray_config_html5.cookie_name,!1,7))});this.flash_new_btn=$('<div class="bgray-btn '+(this.upgrade?"active":"")+'" type="new">\u65b0\u7248<br/>\u64ad\u653e\u5668</div>').prependTo(g).hide().click(function(){$(this).siblings().removeClass("active");$(this).addClass("active");f.initialReset();f.gray_loader_flash(!0);rec_rp("event",i["new"].click_event_name);f.cookie.set(f.gray_config_html5.cookie_name,!0,7)});1==this.ChatGetSettings("defaulth5")&&this.iframe?this.upgrade?($("#bofqi").find("iframe.player").remove(),this.html5_new_btn.trigger("click",!0),rec_rp("event",d["new"].show_event_name)):($("#bofqi").find("iframe.player").remove(),this.html5_btn.trigger("click",!0),rec_rp("event",d.old.show_event_name)):1==this.ChatGetSettings("defaulth5")?this.upgrade?rec_rp("event",d["new"].show_event_name):rec_rp("event",d.old.show_event_name):this.upgrade?rec_rp("event",i["new"].show_event_name):rec_rp("event",i.old.show_event_name)},gray_loader_html5:function(f){var d=this;window.player&&window.player.destroy&&window.player.destroy();this.upgrade="undefined"===typeof f||""===f?this.gray_html5&&this.gray_support_html5?"false"!==this.cookie.get(this.gray_config_html5.cookie_name):!1:f;"html5"!==this.player_type&&d.setLocalStorage("defaulth5",1);if(/bangumi/.test(window.location.href)){var h=this.update_params(!0);h.p=this.HashManage.get("page")||1;h.crossDomain=!0;f=[];for(var g in h){f.push(g+"="+h[g])}f=f.join("&");window.Html5IframeInitialized=function(){d.gray_html5_compatible();loadProgress.end()};$("#bofqi").html('<iframe class="player bilibiliHtml5Player" style="position: relative;" src="'+(this.upgrade?"//www.bilibili.com/blackboard/html5playerbeta.html":"//www.bilibili.com/blackboard/html5player.html")+"?"+f+'" scrolling="no" border="0" frameborder="no" framespacing="0"></iframe>');loadProgress.init(h)}else{h=this.update_params(!0),h.p=window.pageno||this.HashManage.get("page")||1,$("#bofqi").html('<div id="player_placeholder" class="player"></div>'),$.ajax({url:this.upgrade?this.gray_config_html5.new_player+"?v="+this.gray_config_html5.hash:"//static.hdslb.com/player/js/bilibiliPlayer.min.js?v="+this.gray_config_html5_flash.hash,cache:!0,type:"get",dataType:"script",beforeSend:function(){$("#bofqi").html('<div class="player"><div id="bilibiliPlayer"></div></div><iframe style="display: none"></iframe><div id="player_placeholder"></div>');loadProgress.init(h)},success:function(){loadProgress.end();/iPad/.test(navigator.userAgent)&&($("#bofqi").prepend('<div class="main-inner"><div class="app-banner"><div class="app-banner-left"><div class="app-banner-title">\u4e0abilibili\u5ba2\u6237\u7aef</div><div class="app-banner-content">\u9ad8\u6e05\u52a8\u753b \u79bb\u7ebf\u89c2\u770b \u5e94\u6709\u5c3d\u6709</div></div><div class="app-banner-right"><a class="app-open-btn">\u7528\u5ba2\u6237\u7aef\u6253\u5f00</a><a class="app-dl-btn">\u7acb\u5373\u4e0b\u8f7d</a></div></div></div>'),$(".app-banner .app-open-btn").bindApplink({aid:aid}),getDownloadUrl($(".app-banner .app-dl-btn")));window.player=new bilibiliPlayer(h);d.gray_html5_compatible()}})}},gray_html5_compatible:function(){var a={jwplayerMediaBuffer:"video_media_buffer",jwplayerMediaBufferFull:"video_media_buffer_full",jwplayerMediaComplete:"video_media_ended",jwplayerMediaError:"video_media_error",jwplayerMediaLoaded:"video_media_loaded",jwplayerMediaMute:"video_media_mute",jwplayerMediaSeek:"video_media_seek",jwplayerMediaTime:"video_media_time",jwplayerMediaVolume:"video_media_volume"},b={mukio_reloadAccess:"reloadAccess",jwPlay:"play",jwPause:"pause",jwStop:"stop",jwSeek:"seek",jwPlaylistPrev:"prev",jwPlaylistNext:"next",jwGetBuffer:"getBufferRate",jwGetDuration:"getDuration",jwGetFullscreen:"isFullScreen",jwGetWidth:"getWidth",jwGetHeight:"getHeight",jwGetMute:"isMute",jwSetMute:"setMute",jwGetPlaylist:"getPlaylist",jwGetPlaylistIndex:"getPlaylistIndex",jwGetPosition:"getCurrentTime",jwGetState:"getState",jwGetVersion:"getVersion",jwGetPlayurl:"getPlayurl",jwGetVolume:"volume",jwSetVolume:"volume"},c=$("#bofqi").find("#player_placeholder");0===c.length&&(c=$('<div id="player_placeholder"></div>').appendTo($("#bofqi")));var c=c[0],e;for(e in b){(function(a,b){c[a]=function(){if(window.player&&"function"===typeof window.player[b]){return window.player[b].apply(window.player,arguments)}}})(e,b[e])}c.jwAddEventListener=function(b,c){try{"function"!==typeof c&&(c=eval("("+c+")"))}catch(d){c=function(){}}a[b]&&window.player&&window.player.addEventListener&&window.player.addEventListener(a[b],c)};c.jwRemoveEventListener=function(b){a[b]&&window.player&&window.player.removeEventListener&&window.player.removeEventListener(a[b])};"function"===typeof this.callbackFn&&c.jwAddEventListener("jwplayerMediaLoaded",this.callbackFn)},loadedCallback:function(d){clearTimeout(this.flash_loader_timer);var c=+new Date-this.initialTime-this.fixTime;this._sendInitialTime(d,c,"loaded_time");return c},initialCallback:function(d){clearTimeout(this.flash_loader_timer);var c=+new Date-this.initialTime-this.fixTime;this._sendInitialTime(d,c);return c},initCallback:function(d){clearTimeout(this.flash_loader_timer);var c=+new Date-this.initialTime-this.fixTime;this._sendInitialTime(d,c);return c},loadExtraMenuConfig:function(d){var c=[];"flash"===d||"flash_gray"===d?(this.gray_html5&&this.gray_support_html5&&"flash"!==this.player_type?(c.push({label:"\u65e7\u7248HTML5\u64ad\u653e\u5668",id:"change_h5"}),c.push({label:"\u65b0\u7248HTML5\u64ad\u653e\u5668",id:"change_new_h5"})):this.gray_support_html5&&"flash"!==this.player_type&&c.push({label:"HTML5\u64ad\u653e\u5668",id:"change_h5"}),this.gray_flash?this.upgrade?(c.push({label:"\u65b0\u7248\u64ad\u653e\u5668",id:"change_new_flash",active:!0}),c.push({label:"\u65e7\u7248\u64ad\u653e\u5668",id:"change_flash"})):(c.push({label:"\u65b0\u7248\u64ad\u653e\u5668",id:"change_new_flash"}),c.push({label:"\u65e7\u7248\u64ad\u653e\u5668",id:"change_flash",active:!0})):c.push({label:"Flash\u64ad\u653e\u5668",id:"change_flash",active:!0})):flashChecker().hasFlash&&"html5"!==this.player_type?(this.gray_html5&&this.gray_support_html5?this.upgrade?(c.push({label:"\u65e7\u7248HTML5\u64ad\u653e\u5668",id:"change_h5"}),c.push({label:"\u65b0\u7248HTML5\u64ad\u653e\u5668",id:"change_new_h5",active:!0})):(c.push({label:"\u65e7\u7248HTML5\u64ad\u653e\u5668",id:"change_h5",active:!0}),c.push({label:"\u65b0\u7248HTML5\u64ad\u653e\u5668",id:"change_new_h5"})):this.gray_support_html5&&c.push({label:"HTML5\u64ad\u653e\u5668",id:"change_h5",active:!0}),this.gray_flash?(c.push({label:"\u65b0\u7248Flash\u64ad\u653e\u5668",id:"change_new_flash"}),c.push({label:"\u65e7\u7248Flash\u64ad\u653e\u5668",id:"change_flash"})):c.push({label:"Flash\u64ad\u653e\u5668",id:"change_flash"})):this.gray_support_html5&&(this.gray_html5?this.upgrade?(c.push({label:"\u65e7\u7248HTML5\u64ad\u653e\u5668",id:"change_h5"}),c.push({label:"\u65b0\u7248HTML5\u64ad\u653e\u5668",id:"change_new_h5",active:!0})):(c.push({label:"\u65e7\u7248HTML5\u64ad\u653e\u5668",id:"change_h5",active:!0}),c.push({label:"\u65b0\u7248HTML5\u64ad\u653e\u5668",id:"change_new_h5"})):c.push({label:"HTML5\u64ad\u653e\u5668",id:"change_h5",active:!0}),c.push({label:"Flash\u64ad\u653e\u5668",id:"change_flash"}));return{ver:"20161115",menuItems:c}},clickMenu:function(d){var c=this;setTimeout(function(){"change_h5"===d&&c.html5_btn?(c.initialReset(),c.html5_btn.click()):"change_new_h5"===d&&c.html5_new_btn?(c.initialReset(),c.html5_new_btn.click()):"change_flash"===d&&c.flash_btn?(c.initialReset(),c.flash_btn.click()):"change_new_flash"===d&&c.flash_new_btn&&(c.initialReset(),c.flash_new_btn.click())},0);return !0},_sendInitialTime:function(e,d,f){f||(f="initial_time");if(this._track_init&&this._track_load||this._track_init&&"initial_time"==f){return !1}"initial_time"==f?this._track_init=!0:"loaded_time"==f&&(this._track_load=!0);$.ajax({url:"//data.bilibili.com/v/flashplay/"+("html5"==e?"h5_player_op":"flash_play_op"),data:{pname:window.pageno||1,mid:window.uid||"",statue:1,playmethod:0,avid:aid,eventparam:d,progress:0,displayid:+new Date,eventid:f,trackerid:"",cid:cid,fver:e,seasonid:"",epid:"",videotype:1,fid:"web_player"},xhrFields:{withCredentials:!0},type:"get"})},_getHiddenProp:function(){var d=["webkit","moz","ms","o"];if("hidden" in document){return"hidden"}for(var c=0;c<d.length;c++){if(d[c]+"Hidden" in document){return d[c]+"Hidden"}}return null},_isDocumentHidden:function(){var b=this._getHiddenProp();return b?document[b]:!1}};function EmbedPlayer(h,f,n,l,j,i){1<$("#bofqi").find("#player_placeholder").length&&$("#bofqi").find("#player_placeholder").eq(1).remove();var m=$("#bofqi").contents().filter(function(){return 3==this.nodeType});GrayManager.GetUrlValue("d")&&(n=n+"&d="+GrayManager.GetUrlValue("d"));GrayManager.GetUrlValue("t")&&(n=n+"&t="+GrayManager.GetUrlValue("t"));GrayManager.GetUrlValue("lastplaytime")&&(n=n+"&lastplaytime="+GrayManager.GetUrlValue("lastplaytime"));var g=m.text().match(/\[flashvars\](.*)\[\/flashvars\]/);null!=g&&(n=n+"&"+g[1],m.remove());n&&(aid=n.match(/aid=(\d+)/)[1],(cid=n.match(/cid=(\d+)\&/))&&(cid=cid[1]));GrayManager.initialized=!1;GrayManager.storageLoaded=!1;GrayManager.init(n,j,i,function(){GrayManager.player_type=l;if(!GrayManager.startTimeSend){GrayManager.startTimeSend=!0;try{window.performance&&(window.performance.timing&&window.performance.timing.navigationStart)&&GrayManager._sendInitialTime(1==GrayManager.ChatGetSettings("defaulth5")?"html5":"flash",+new Date-performance.timing.navigationStart,"start_time")}catch(e){}}if(GrayManager.enable){GrayManager.gray_loader(h,f,n,l,j,i)}else{if(GrayManager.gray_support_html5&&(!GrayManager.player_type&&1==GrayManager.ChatGetSettings("defaulth5")||"html5"===GrayManager.player_type)){GrayManager.gray_loader_html5(),GrayManager.gray_html5_compatible(),rec_rp("event",GrayManager.gray_config_html5_flash.track["new"].show_event_name)}else{var a={};n=n.split("&");for(var b=0;b<n.length;b++){if(""!=n[b]){var c=n[b].split("=");a[c[0]]=c[1]}}$("#bofqi").html('<div id="player_placeholder" class="player"></div>');swfobject.embedSWF(f,"player_placeholder","950","482","0","",a,{bgcolor:"#ffffff",allowfullscreeninteractive:"true",allowfullscreen:"true",quality:"high",allowscriptaccess:"always",wmode:/Firefox\/49\.0/.test(navigator.userAgent)?"opaque":"direct"},{"class":"player"},i);GrayManager.gray_flash_compatible();rec_rp("event",GrayManager.gray_config_html5_flash.track.old.show_event_name)}}});$("body").on("mousewheel DOMMouseScroll","#bofqi",function(e){var d=deltaFilter(e.originalEvent),k=document.getElementById("player_placeholder");if(d&&k&&k.scrollHappened&&k.scrollHappened(d)&&!/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(navigator.userAgent.toLowerCase())&&!/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.test(navigator.userAgent.toLowerCase())){return e.preventDefault(),!1}});return !1}var loadProgress={init:function(e){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(b){window.setTimeout(b,1000/60)}}();window.cancelNextRequestAnimationFrame=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;this.timer&&window.cancelNextRequestAnimationFrame(this.timer);this._timer&&window.cancelNextRequestAnimationFrame(this._timer);this.times=1;this.per=0;var d=$("#bofqi").width();0<$(".playerLoadProgress").length&&$(".playerLoadProgress").remove();$("head").append('<style class="playerLoadProgress">'+this.publicStyle+"</style>");try{"1"==e.as_wide||JSON.parse(localStorage.bilibili_player_settings).video_status.widescreensave&&JSON.parse(localStorage.bilibili_player_settings).video_status.iswidescreen?1160<=d?$(".playerLoadProgress").append(this.styleList.styleWide):1160>d&&(680>=d?$(".playerLoadProgress").append(this.styleList.styleWideNarrowOffline):680<d&&860>=d?$(".playerLoadProgress").append(this.styleList.styleWideOffline):$(".playerLoadProgress").append(this.styleList.styleWideNarrow)):1160<=d?$(".playerLoadProgress").append(this.styleList.styleCommon):1160>d&&$(".playerLoadProgress").append(this.styleList.styleCommonNarrow)}catch(f){1160<=d?$(".playerLoadProgress").append(this.styleList.styleCommon):1160>d&&$(".playerLoadProgress").append(this.styleList.styleCommonNarrow)}$("#bofqi").append(this.content);this.start()},content:'<div class="bilibili-player-video-mask-bg"></div><div class="bilibili-player-video-load-wrap"><div class="bilibili-player-video-load-content"><div class="bilibili-player-video-load-tv"><div class="bilibili-player-video-load-mask"></div><img class="small-tv-ico" src="data:image/gif;base64,R0lGODlhWgBaALMOAHR0dAICAnd3dwEBAXh4eAMDAwkJCQ0NDQsLCxwcHA4ODggICHl5eQAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTMyIDc5LjE1OTI4NCwgMjAxNi8wNC8xOS0xMzoxMzo0MCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiYWE1ODg5ZS1jN2RmLTRmZmUtYjkzOS0wMmVkMTZhNmNjZDIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6M0I2ODI2NjA1NzhGMTFFNkEyMEVDNzhEOUY1RkQxRjgiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6M0I2ODI2NUY1NzhGMTFFNkEyMEVDNzhEOUY1RkQxRjgiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUuNSAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjljYjgzNjY2LWYxYWUtNGMyZi1hMGEwLThhODJmYjIxM2U0MyIgc3RSZWY6ZG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmU1NDE3YzFmLTllODAtMTE3OS04NjdiLWUy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"></div><span class="bilibili-player-video-load-progress-title">Loading(<span class="bilibili-player-video-load-percent">0%</span>)...</span></div></div>',publicStyle:'.bilibili-player-video-mask-bg{width:100%;height:100%;position:absolute;top:0;left:0;background-color:rgb(255,255,255)}.bilibili-player-video-load-wrap{width:860px;height:564px;position:absolute;top:0;left:0;z-index: 9999}.bilibili-player-video-load-content{position:absolute;top:0;left:0;right:0;bottom:0;margin:auto;width: 178px;height:100px}.bilibili-player-video-load-tv{margin-top:55px;width:90px;height:90px;overflow:hidden;position:relative;margin:0 auto;}.bilibili-player-video-load-mask{width:90px;height:90px;background:rgba(255,255,255,.4);position:absolute;top:0;left:0}.bilibili-player-video-load-progress-title{white-space:nowrap;font-size:28px;font-family:"Times New Roman"}',styleList:{styleCommon:".bilibili-player-video-load-wrap{width:860px;height:564px;}.bilibili-player-video-load-tv{margin-top:55px;}",styleCommonNarrow:".bilibili-player-video-load-wrap{width:680px;height:556px;}.bilibili-player-video-load-tv{margin-top:-3px;}",styleWide:".bilibili-player-video-load-wrap{width:1160px;height:737px;}.bilibili-player-video-load-tv{margin-top:-29px;}",styleWideNarrow:".bilibili-player-video-load-wrap{width:980px;height:588px;}.bilibili-player-video-load-tv{margin-top:-29px;}",styleWideOffline:".bilibili-player-video-load-wrap{width:860px;height:564px;}.bilibili-player-video-load-tv{margin-top:-3px;}",styleWideNarrowOffline:".bilibili-player-video-load-wrap{width:680px;height:556px;}.bilibili-player-video-load-tv{margin-top:-38px}"},times:1,per:0,timer:0,_timer:0,start:function(){var d=this,c=function(){Math.log(d.times);d.per=80>=d.per?Math.floor(100*(Math.log(d.times)/Math.log(15.6))):d.per+0.03;$(".bilibili-player-video-load-mask").css("height",100-Math.floor(d.per)+"%");$(".bilibili-player-video-load-percent").html(Math.floor(d.per)+"%");d.times++;99>Math.floor(d.per)&&(d.timer=window.requestAnimationFrame(c))};window.requestAnimationFrame(c)},end:function(){function f(){$(".bilibili-player-video-panel-image-detail")&&$(".small-tv-ico").hide();d.per+=g;100<=d.per&&(d.per=100);$(".bilibili-player-video-load-mask").css("height",100-Math.floor(d.per)+"%");$(".bilibili-player-video-load-percent").html(Math.floor(d.per)+"%");100>Math.floor(d.per)?d._timer=window.requestAnimationFrame(f):($(".bilibili-player-video-load-percent").html("100%"),$(".bilibili-player-video-load-mask").css("height","0%"),setTimeout(function(){$(".bilibili-player-video-load-wrap").remove()},1000/60))}var d=this;$(".bilibili-player-video-mask-bg").remove();var h=Math.ceil(100-d.per),g=1;0.3<h/60&&(g=Math.ceil(h/20));window.requestAnimationFrame(f)}};$(function(){/www\.bilibili\.com\/video/.test(window.location.href)&&GrayManager.init()});